webpackJsonp([2],{"5qZF":function(t,e){},"745u":function(t,e){},"878P":function(t,e){},"9h3m":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vuelidate=A,Object.defineProperty(e,"withParams",{enumerable:!0,get:function(){return n.withParams}}),e.default=e.validationMixin=void 0;var o=s("Zsrf"),n=s("fkiB");function a(t){return function(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},o=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),o.forEach(function(e){r(t,e,s[e])})}return t}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=function(){return null},u=function(t,e,s){return t.reduce(function(t,o){return t[s?s(o):o]=e(o),t},{})};function d(t){return"function"==typeof t}function v(t){return null!==t&&("object"===l(t)||d(t))}var m=function(t,e,s,o){if("function"==typeof s)return s.call(t,e,o);s=Array.isArray(s)?s:s.split(".");for(var n=0;n<s.length;n++){if(!e||"object"!==l(e))return o;e=e[s[n]]}return void 0===e?o:e},h="__isVuelidateAsyncVm";var p={$invalid:function(){var t=this,e=this.proxy;return this.nestedKeys.some(function(e){return t.refProxy(e).$invalid})||this.ruleKeys.some(function(t){return!e[t]})},$dirty:function(){var t=this;return!!this.dirty||0!==this.nestedKeys.length&&this.nestedKeys.every(function(e){return t.refProxy(e).$dirty})},$anyDirty:function(){var t=this;return!!this.dirty||0!==this.nestedKeys.length&&this.nestedKeys.some(function(e){return t.refProxy(e).$anyDirty})},$error:function(){return this.$dirty&&!this.$pending&&this.$invalid},$anyError:function(){return this.$anyDirty&&!this.$pending&&this.$invalid},$pending:function(){var t=this;return this.ruleKeys.some(function(e){return t.getRef(e).$pending})||this.nestedKeys.some(function(e){return t.refProxy(e).$pending})},$params:function(){var t=this,e=this.validations;return i({},u(this.nestedKeys,function(t){return e[t]&&e[t].$params||null}),u(this.ruleKeys,function(e){return t.getRef(e).$params}))}};function f(t){this.dirty=t;var e=this.proxy,s=t?"$touch":"$reset";this.nestedKeys.forEach(function(t){e[t][s]()})}var _={$touch:function(){f.call(this,!0)},$reset:function(){f.call(this,!1)},$flattenParams:function(){var t=this.proxy,e=[];for(var s in this.$params)if(this.isNested(s)){for(var o=t[s].$flattenParams(),n=0;n<o.length;n++)o[n].path.unshift(s);e=e.concat(o)}else e.push({path:[],name:s,params:this.$params[s]});return e}},g=Object.keys(p),x=Object.keys(_),w=null,b=function(t){if(w)return w;var e=t.extend({computed:{refs:function(){var t=this._vval;this._vval=this.children,(0,o.patchChildren)(t,this._vval);var e={};return this._vval.forEach(function(t){e[t.key]=t.vm}),e}},beforeCreate:function(){this._vval=null},beforeDestroy:function(){this._vval&&((0,o.patchChildren)(this._vval),this._vval=null)},methods:{getModel:function(){return this.lazyModel?this.lazyModel(this.prop):this.model},getModelKey:function(t){var e=this.getModel();if(e)return e[t]},hasIter:function(){return!1}}}),s=e.extend({data:function(){return{rule:null,lazyModel:null,model:null,lazyParentModel:null,rootModel:null}},methods:{runRule:function(e){var s=this.getModel();(0,n.pushParams)();var o,a=this.rule.call(this.rootModel,s,e),i=v(o=a)&&d(o.then)?function(t,e){var s=new t({data:{p:!0,v:!1}});return e.then(function(t){s.p=!1,s.v=t},function(t){throw s.p=!1,s.v=!1,t}),s[h]=!0,s}(t,a):a,r=(0,n.popParams)();return{output:i,params:r&&r.$sub?r.$sub.length>1?r:r.$sub[0]:null}}},computed:{run:function(){var t=this,e=this.lazyParentModel();if(Array.isArray(e)&&e.__ob__){var s=e.__ob__.dep;s.depend();var o=s.constructor.target;if(!this._indirectWatcher){var n=o.constructor;this._indirectWatcher=new n(this,function(){return t.runRule(e)},null,{lazy:!0})}var a=this.getModel();if(!this._indirectWatcher.dirty&&this._lastModel===a)return this._indirectWatcher.depend(),o.value;this._lastModel=a,this._indirectWatcher.evaluate(),this._indirectWatcher.depend()}else this._indirectWatcher&&(this._indirectWatcher.teardown(),this._indirectWatcher=null);return this._indirectWatcher?this._indirectWatcher.value:this.runRule(e)},$params:function(){return this.run.params},proxy:function(){var t=this.run.output;return t[h]?!!t.v:!!t},$pending:function(){var t=this.run.output;return!!t[h]&&t.p}},destroyed:function(){this._indirectWatcher&&(this._indirectWatcher.teardown(),this._indirectWatcher=null)}}),r=e.extend({data:function(){return{dirty:!1,validations:null,lazyModel:null,model:null,prop:null,lazyParentModel:null,rootModel:null}},methods:i({},_,{refProxy:function(t){return this.getRef(t).proxy},getRef:function(t){return this.refs[t]},isNested:function(t){return"function"!=typeof this.validations[t]}}),computed:i({},p,{nestedKeys:function(){return this.keys.filter(this.isNested)},ruleKeys:function(){var t=this;return this.keys.filter(function(e){return!t.isNested(e)})},keys:function(){return Object.keys(this.validations).filter(function(t){return"$params"!==t})},proxy:function(){var t=this,e=u(this.keys,function(e){return{enumerable:!0,configurable:!0,get:function(){return t.refProxy(e)}}}),s=u(g,function(e){return{enumerable:!0,configurable:!0,get:function(){return t[e]}}}),o=u(x,function(e){return{enumerable:!1,configurable:!0,get:function(){return t[e]}}}),n=this.hasIter()?{$iter:{enumerable:!0,value:Object.defineProperties({},i({},e))}}:{};return Object.defineProperties({},i({},e,n,{$model:{enumerable:!0,get:function(){var e=t.lazyParentModel();return null!=e?e[t.prop]:null},set:function(e){var s=t.lazyParentModel();null!=s&&(s[t.prop]=e,t.$touch())}}},s,o))},children:function(){var t=this;return a(this.nestedKeys.map(function(e){return b(t,e)})).concat(a(this.ruleKeys.map(function(e){return k(t,e)}))).filter(Boolean)}})}),l=r.extend({methods:{isNested:function(t){return void 0!==this.validations[t]()},getRef:function(t){var e=this;return{get proxy(){return e.validations[t]()||!1}}}}}),f=r.extend({computed:{keys:function(){var t=this.getModel();return v(t)?Object.keys(t):[]},tracker:function(){var t=this,e=this.validations.$trackBy;return e?function(s){return"".concat(m(t.rootModel,t.getModelKey(s),e))}:function(t){return"".concat(t)}},getModelLazy:function(){var t=this;return function(){return t.getModel()}},children:function(){var t=this,e=this.validations,s=this.getModel(),n=i({},e);delete n.$trackBy;var a={};return this.keys.map(function(e){var i=t.tracker(e);return a.hasOwnProperty(i)?null:(a[i]=!0,(0,o.h)(r,i,{validations:n,prop:e,lazyParentModel:t.getModelLazy,model:s[e],rootModel:t.rootModel}))}).filter(Boolean)}},methods:{isNested:function(){return!0},getRef:function(t){return this.refs[this.tracker(t)]},hasIter:function(){return!0}}}),b=function(t,e){if("$each"===e)return(0,o.h)(f,e,{validations:t.validations[e],lazyParentModel:t.lazyParentModel,prop:e,lazyModel:t.getModel,rootModel:t.rootModel});var s=t.validations[e];if(Array.isArray(s)){var n=t.rootModel,a=u(s,function(t){return function(){return m(n,n.$v,t)}},function(t){return Array.isArray(t)?t.join("."):t});return(0,o.h)(l,e,{validations:a,lazyParentModel:c,prop:e,lazyModel:c,rootModel:n})}return(0,o.h)(r,e,{validations:s,lazyParentModel:t.getModel,prop:e,lazyModel:t.getModelKey,rootModel:t.rootModel})},k=function(t,e){return(0,o.h)(s,e,{rule:t.validations[e],lazyParentModel:t.lazyParentModel,lazyModel:t.getModel,rootModel:t.rootModel})};return w={VBase:e,Validation:r}},k=null;var y=function(t,e){var s=function(t){if(k)return k;for(var e=t.constructor;e.super;)e=e.super;return k=e,e}(t),n=b(s),a=n.Validation;return new(0,n.VBase)({computed:{children:function(){var s="function"==typeof e?e.call(t):e;return[(0,o.h)(a,"$v",{validations:s,lazyParentModel:c,prop:"$v",model:t,rootModel:t})]}}})},T={data:function(){var t=this.$options.validations;return t&&(this._vuelidate=y(this,t)),{}},beforeCreate:function(){var t=this.$options;t.validations&&(t.computed||(t.computed={}),t.computed.$v||(t.computed.$v=function(){return this._vuelidate?this._vuelidate.refs.$v.proxy:null}))},beforeDestroy:function(){this._vuelidate&&(this._vuelidate.$destroy(),this._vuelidate=null)}};function A(t){t.mixin(T)}e.validationMixin=T;var q=A;e.default=q},AOl7:function(t,e){},DeUA:function(t,e){},ER0B:function(t,e){},ESQ7:function(t,e){},F4EN:function(t,e){},H7Vi:function(t,e){},IntB:function(t,e){},J98W:function(t,e){},M6MZ:function(t,e){},MSXR:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("v-container",[e("router-view")],1)],1)},staticRenderFns:[]};var a=s("VU/8")({name:"app",data:function(){return{}}},n,!1,function(t){s("mbHj")},null,null).exports,i=s("/ocq"),r=s("mtWM"),l=s.n(r),c="127.0.0.1:8000",u=c,d={user:{authenticated:!1},authenticate:function(t,e,s){var o=this;l.a.post(u+"/token-auth/",e).then(function(e){var n=e.data;t.$cookie.set("token",n.token,"1D"),t.validLogin=!0,o.user.authenticated=!0,s&&jt.push(s)}).catch(function(e){t.snackbar=!0,t.message="Неверный логин или пароль"})},signup:function(t,e,s){var o=this;l.a.post(u+"/api/register/",e).then(function(){t.validSignUp=!0,o.authenticate(t,e,s)}).catch(function(e){t.snackbar=!0,t.message="Не удалось зарегистрироваться"})},signout:function(t,e){t.$cookie.delete("token"),this.user.authenticated=!1,e&&jt.push(e)},checkAuthentication:function(){var t=document.cookie;this.user.authenticated=!!t},getAuthenticationHeader:function(t){return"JWT "+t.$cookie.get("token")}},v={data:function(){return{dialog:!1,drawer:null,items:[{icon:"done",text:"Добавленные тесты",link:"/"},{icon:"help_outline",text:"Управление вопросами",link:"/questions"},{icon:"toc",text:"Управление тестами",link:"/tests"}]}},methods:{signout:function(){d.signout(this,"/login")},changePage:function(t){jt.push(t)},toProfile:function(){jt.push("/profile")}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"l-home-page"},[s("v-navigation-drawer",{attrs:{fixed:"",clipped:t.$vuetify.breakpoint.mdAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-list",{attrs:{dense:""}},[t._l(t.items,function(e){return[e.heading?s("v-layout",{key:e.heading,attrs:{row:"","align-center":""}},[s("v-flex",{attrs:{xs6:""}},[e.heading?s("v-subheader",[t._v("\n                "+t._s(e.heading)+"\n              ")]):t._e()],1),t._v(" "),s("v-flex",{staticClass:"text-xs-center",attrs:{xs6:""}},[s("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):s("v-list-tile",{key:e.text,on:{click:function(s){t.changePage(e.link)}}},[s("v-list-tile-action",[s("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1)]})],2)],1),t._v(" "),s("v-toolbar",{attrs:{color:"blue darken-3",dark:"",app:"","clipped-left":t.$vuetify.breakpoint.mdAndUp,fixed:""}},[s("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[s("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),s("span",{staticClass:"hidden-sm-and-down"})],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-menu",{attrs:{"close-on-content-click":!1,"offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("v-btn",{attrs:{slot:"activator",large:"",icon:""},slot:"activator"},[s("v-icon",{attrs:{size:"32px"}},[t._v("\n            more_vert\n          ")])],1),t._v(" "),s("v-card",[s("v-list",[s("v-list-tile",{on:{click:function(e){t.toProfile()}}},[s("v-icon",{staticClass:"mr-3"},[t._v("\n                account_circle\n              ")]),t._v(" "),s("v-list-tile-title",[t._v("Настройки профиля")])],1),t._v(" "),s("v-list-tile",{on:{click:function(e){t.signout()}}},[s("v-icon",{staticClass:"mr-3"},[t._v("\n                power_settings_new\n              ")]),t._v(" "),s("v-list-tile-title",[t._v("Выйти")])],1)],1)],1)],1)],1),t._v(" "),s("v-content",[s("router-view")],1)],1)},staticRenderFns:[]};var h=s("VU/8")(v,m,!1,function(t){s("H7Vi")},null,null).exports,p={data:function(){return{snackbar:!1,validLogin:!1,validSignUp:!1,signUpVisible:!1,loginPasswordVisible:!1,signUpPasswordVisible:!1,timeout:6e3,rules:[function(t){return!!t||"Это обязательное поле"}],credentials:{username:"",password:""},newUser:{username:"",password:""},message:""}},methods:{submitAuthentication:function(){d.authenticate(this,this.credentials,"/")},submitSignUp:function(){d.signup(this,this.newUser,"/")}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-auth-container"},[s("div",{staticClass:"authTitle"},[s("v-card-text",[s("h2",{staticClass:"display-3 text-lg-center"},[t._v("Service Title")])])],1),t._v(" "),s("div",{staticClass:"l-auth"},[s("v-form",{model:{value:t.validLogin,callback:function(e){t.validLogin=e},expression:"validLogin"}},[s("v-text-field",{attrs:{label:"Логин","prepend-icon":"account_box",rules:t.rules,required:"",color:"light-blue lighten-1"},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}}),t._v(" "),s("v-text-field",{attrs:{label:"Пароль","prepend-icon":"lock",rules:t.rules,"append-icon":t.loginPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return t.loginPasswordVisible=!t.loginPasswordVisible},type:t.loginPasswordVisible?"text":"password",color:"light-blue lighten-1",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),t._v(" "),s("v-btn",{attrs:{block:"",flat:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.signUpVisible=!0}}},[t._v("Создать аккаунт")]),t._v(" "),s("v-btn",{attrs:{block:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.submitAuthentication()}}},[t._v("Войти")])],1)],1),t._v(" "),t.signUpVisible?s("div",{staticClass:"l-signup"},[s("v-form",{model:{value:t.validSignUp,callback:function(e){t.validSignUp=e},expression:"validSignUp"}},[s("v-text-field",{attrs:{label:"Логин","prepend-icon":"account_box",rules:t.rules,required:"",color:"light-blue lighten-1"},model:{value:t.newUser.username,callback:function(e){t.$set(t.newUser,"username",e)},expression:"newUser.username"}}),t._v(" "),s("v-text-field",{attrs:{label:"Пароль","prepend-icon":"lock",rules:t.rules,"append-icon":t.signUpPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return t.signUpPasswordVisible=!t.signUpPasswordVisible},type:t.signUpPasswordVisible?"text":"password",color:"light-blue lighten-1",required:""},model:{value:t.newUser.password,callback:function(e){t.$set(t.newUser,"password",e)},expression:"newUser.password"}}),t._v(" "),s("v-btn",{attrs:{block:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.submitSignUp()}}},[t._v("Зарегистрироваться")])],1)],1):t._e(),t._v(" "),s("v-snackbar",{attrs:{timeout:t.timeout,bottom:"bottom",color:"red lighten-1"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.message)+"\n  ")])],1)},staticRenderFns:[]};var _=s("VU/8")(p,f,!1,function(t){s("ESQ7")},null,null).exports,g=c,x={props:["title","token","author","image","description","added","element","collection"],data:function(){return{show:!1,successDelete:!1,alert:!1,snackbar:!1,message:""}},methods:{deleteTest:function(t){var e=this;l.a.delete(g+"/api/courses/"+t+"/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(t){t.data;e.collection.splice(e.element,1),e.alert=!0,e.successDelete=!0,e.message="Тест успешно удален."}).catch(function(t){e.alert=!0,e.successDelete=!1,e.message="Не удалось удалить тест. Проверьте подключение к сети.",console.log(t)})},reloadPage:function(){window.location.reload(!0)}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",{staticClass:"testItem px-2 py-2"},[s("router-link",{attrs:{tag:"div",to:{name:"testpage",params:{token:t.token}}}},[s("v-layout",{staticClass:"pointerBlock",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-img",{staticClass:"mb-2",attrs:{"aspect-ratio":16/9,src:t.image,position:"center center"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm8:""}},[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("div",{staticClass:"headline"},[t._v(t._s(t.title))]),t._v(" "),t.added?s("div",[t._v("Автор: "+t._s(t.author))]):t._e()])])],1)],1)],1),t._v(" "),s("v-divider",{attrs:{light:""}}),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-card-actions",[s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(e){t.show=!t.show}},slot:"activator"},[s("v-icon",[t._v(t._s(t.show?"keyboard_arrow_down":"keyboard_arrow_up"))])],1),t._v(" "),s("span",[t._v(t._s(t.show?"Скрыть описание":"Показать описание"))])],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[t.added?t._e():s("v-btn",{attrs:{slot:"activator",to:{name:"edittest",params:{token:t.token}},icon:""},slot:"activator"},[s("v-icon",[t._v("edit")])],1),t._v(" "),s("span",[t._v("Редактировать тест")])],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[t.added?t._e():s("v-btn",{attrs:{slot:"activator",icon:""},nativeOn:{click:function(e){t.deleteTest(t.token)}},slot:"activator"},[s("v-icon",[t._v("delete")])],1),t._v(" "),s("span",[t._v("Удалить тест")])],1)],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successDelete?"success":"error"}},[t._v("\n\t\t\t        "+t._s(t.message)+"\n\n\t\t\t\t      \t"),t.successDelete?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-slide-y-transition",[s("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[t._v("\n\t\t              "+t._s(t.description)+"\n\t\t            ")])],1)],1),t._v(" "),s("v-snackbar",{attrs:{color:t.successDelete?"green lighten-1":"red lighten-1"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n\t\t\t        "+t._s(t.message)+"\n\n\t\t      \t"),t.successDelete?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=s("VU/8")(x,w,!1,function(t){s("IntB")},null,null).exports,k=c,y={components:{CreatedTest:b},data:function(){return{tests:[],message:"",notify:"",alert:!1,emptyPic:s("ne0W")}},methods:{getAddedTests:function(){var t=this;l.a.get(k+"/api/courses-added/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.tests=s,t.tests.reverse(),0==t.tests.length?t.notify="Нет добавленных тестов.":t.notify="Вы добавили "+t.tests.length+" тестов:"}).catch(function(e){t.alert=!0,t.message="Не удалось получить список тестов. Проверьте подключение к сети.",console.log(e)})},reloadPage:function(){window.location.reload(!0)}},mounted:function(){this.getAddedTests()}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"display-1"},[t._v("Добавленные тесты")])]),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v(t._s(t.notify))]),t._v(" "),t._l(t.tests,function(e){return s("created-test",{attrs:{token:e.token,title:e.name,author:e.author,added:1,description:e.description,image:e.image?e.image:t.emptyPic}})})],2),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:"error"}},[t._v("\n\t        "+t._s(t.message)+"\n\n\t      \t"),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1)],1)},staticRenderFns:[]};var A=s("VU/8")(y,T,!1,function(t){s("ORKW")},null,null).exports,q=c,L={props:["withchecks","questionsChecks","collection"],data:function(){return{alert:!1,alert_message:"",snackbar:!1,snackbar_message:"",successDelete:!1}},methods:{deleteQuestion:function(t,e){var s=this;l.a.delete(q+"/api/questions/"+e+"/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){e.data;s.collection.splice(t,1),s.snackbar=!0,s.successDelete=!0,s.snackbar_message="Вопрос успешно удален."}).catch(function(t){s.alert=!0,s.successDelete=!1,s.alert_message="Не удалось удалить вопрос. Проверьте подключение к сети.",console.log(t)})},reloadPage:function(){window.location.reload(!0)}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},t._l(t.collection,function(e){return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",{staticClass:"questionItem"},[s("v-card-title",{attrs:{"primary-title":"",to:{name:"editquestion",params:{id:e.id}}}},[t.withchecks?s("v-flex",{attrs:{xs1:""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{value:e.id,"hide-details":""},on:{change:function(e){t.$emit("update:questionsChecks",t.questionsChecks)}},model:{value:t.questionsChecks,callback:function(e){t.questionsChecks=e},expression:"questionsChecks"}})],1):t._e(),t._v(" "),(t.withchecks,s("v-flex",[s("span",{staticClass:"headline"},[t._v(t._s(e.title)+"\n\t\t              \t"),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v(" "+t._s(1==e.answer_type?"Тип ответа: ввод значения":2==e.answer_type?"Тип ответа: выбор одного правильного":"Тип ответа: выбор нескольких правильных")+" ")])],1)],1)])),t._v(" "),s("v-spacer"),t._v(" "),t.withchecks?t._e():s("v-tooltip",{attrs:{bottom:""}},[t.withchecks?t._e():s("v-btn",{attrs:{slot:"activator",to:{name:"editquestion",params:{id:e.id}},icon:""},slot:"activator"},[s("v-icon",[t._v("edit")])],1),t._v(" "),s("span",[t._v("Редактировать вопрос")])],1),t._v(" "),t.withchecks?t._e():s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:""},nativeOn:{click:function(s){t.deleteQuestion(t.collection.indexOf(e),e.id)}},slot:"activator"},[s("v-icon",[t._v("delete")])],1),t._v(" "),s("span",[t._v("Удалить вопрос")])],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(s){t.$emit("update:collection",e.id)}},slot:"activator"},[s("v-icon",[t._v(t._s(e.show?"keyboard_arrow_down":"keyboard_arrow_up"))])],1),t._v(" "),s("span",[t._v(t._s(e.show?"Скрыть формулировку":"Показать формулировку"))])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successDelete?"success":"error"}},[t._v("\n\t\t\t\t        "+t._s(t.alert_message)+"\n\n\t\t\t\t\t      \t"),t.successDelete?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1),t._v(" "),s("v-slide-y-transition",[s("v-card-text",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"question.show"}]},[s("p",{staticClass:"wrappedText"},[t._v("\n\t\t\t              "+t._s(e.text)+"\n\t\t\t          ")])])],1),t._v(" "),s("v-snackbar",{attrs:{color:"green lighten-1"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n\t\t\t\t    "+t._s(t.snackbar_message)+"\n\t\t\t\t  ")])],1)],1)],1)}))],1)},staticRenderFns:[]};var O=s("VU/8")(L,C,!1,function(t){s("jNRQ")},null,null).exports,$=c,S={data:function(){return{questions:[],alert:!1,alert_message:"",successLoad:!1}},methods:{getAddedQuestions:function(){var t=this;l.a.get($+"/api/questionslist/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.questions=s,t.questions.reverse();for(var o=0;o<t.questions.length;++o)t.questions[o].show=!1,console.log(t.questions[o].show);t.successLoad=!0}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить список вопросов. Проверьте подключение к сети.",console.log(e)})},reloadPage:function(){window.location.reload(!0)},toggleShow:function(t){for(var e=0;e<this.questions.length;++e)if(this.questions[e].id==t)return this.questions[e].show=!this.questions[e].show,this.questions.push(null),void this.questions.pop()}},mounted:function(){this.getAddedQuestions()},computed:{success_message:function(){return this.questions.length?"Добавлено "+this.questions.length+" вопросов:":"В вашем профиле нет созданных вопросов."}}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"display-1"},[t._v("Управление вопросами")])]),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{staticClass:"mb-3",attrs:{round:"",color:"success",to:"add/question",dark:""}},[s("v-icon",{staticClass:"mr-2",attrs:{size:"24px"}},[t._v("\n\t\t\t\tadd\n\t\t\t")]),t._v("\n\t\tДобавить новый вопрос")],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[t.successLoad?s("p",[t._v(t._s(t.success_message))]):t._e(),t._v(" "),s("added-question",{attrs:{withchecks:0,collection:t.questions},on:{"update:collection":function(e){t.toggleShow(e)}}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:"error"}},[t._v("\n        "+t._s(t.alert_message)+"\n\n\t      \t"),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1)],1)},staticRenderFns:[]};var I=s("VU/8")(S,P,!1,function(t){s("F4EN")},null,null).exports,M={props:{value:{type:String},accept:{type:String,default:"*"},selectLabel:{type:String,default:"Выберите файл"},removeLabel:{type:String,default:"Удалить"},dis:{type:Boolean},label:{type:String},checked:{type:Boolean}},data:function(){return{fileUrl:"",filename:""}},watch:{value:function(t){this.fileUrl=t},checked:function(t){t||this.removeFile()}},mounted:function(){this.fileUrl=this.value},methods:{onPickFile:function(){this.$refs.file.click()},onFilePicked:function(t){var e=this,s=t.target.files||t.dataTransfer.files;if(s&&s[0]){if(this.filename=s[0].name,this.filename&&this.filename.lastIndexOf(".")<=0)return alert("add valid file!");var o=new FileReader;o.addEventListener("load",function(){e.fileUrl=o.result}),o.readAsDataURL(s[0]),this.$emit("input",s[0])}},removeFile:function(){this.fileUrl="",this.$emit("update:deleteFile")}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.fileUrl&&"image/*"==t.accept?s("div",[s("img",{ref:"fileUrl",staticStyle:{cursor:"pointer"},attrs:{src:t.fileUrl,height:"150"},on:{click:t.onPickFile}})]):t._e(),t._v(" "),s("div",[t.fileUrl?s("v-btn",{staticClass:"error",attrs:{raised:"",disabled:t.dis},on:{click:t.removeFile}},[t._v("\n            "+t._s(t.removeLabel)+"\n        ")]):s("v-btn",{attrs:{raised:"",disabled:t.dis},on:{click:t.onPickFile}},[t._v("\n            "+t._s(t.selectLabel)+"\n        ")]),t._v(" "),s("input",{ref:"file",attrs:{type:"file",name:"file",accept:t.accept,disabled:t.dis},on:{change:function(e){t.onFilePicked(e)}}})],1),t._v(" "),t.fileUrl?t._e():s("v-label",[t._v(t._s(t.label))]),t._v(" "),t.fileUrl&&"audio/*"==t.accept?s("v-label",[t._v(t._s(t.filename))]):t._e()],1)},staticRenderFns:[]};var V=s("VU/8")(M,U,!1,function(t){s("J98W")},"data-v-37c29f77",null).exports,D=c,Q={components:{FileInput:V},data:function(){var t=this;return{enabledImage:!1,image:null,showImageTooltip:!1,showTitleTooltip:!1,alert:!1,successLoad:!1,title:"",alert_message:"",imageLoadText:"Изображение не загружено",rules:{title:function(e){return e.length>=t.minTitleLen&&e.length<=t.maxTitleLen||"Длина названия должна быть в диапазоне от "+t.minTitleLen+" до "+t.maxTitleLen+" символов"},required:function(t){return!!t||"Это необходимое поле"}},minTitleLen:8,maxTitleLen:100,modes:[]}},methods:{getUploadedImage:function(t){this.image=t},reloadPage:function(){window.location.reload(!0)},getModes:function(){var t=this;l.a.get(D+"/api/strict_modes/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.modes=s,t.successLoad=!0}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить список режимов. Проверьте подключение к сети."})},addMode:function(){var t=this,e=new FormData;e.set("name",this.title),e.set("image",this.image),l.a.post(D+"/api/strict_modes/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){e.response;t.reloadPage()}).catch(function(e){t.successLoad=!1,t.alert=!0,t.alert_message="Не удалось добавить режим. Проверьте подключение к сети."})},deleteMode:function(t){var e=this;l.a.delete(D+"/api/strict_modes/"+t+"/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(t){e.reloadPage()}).catch(function(t){e.successLoad=!1,e.alert=!0,e.alert_message="Не удалось удалить режим. Проверьте подключение к сети."})},hideAlert:function(){this.alert=!1},startTimer:function(){setTimeout(this.hideAlert,4e3)}},mounted:function(){this.getModes()},watch:{alert:function(t){t&&this.startTimer()}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-form",{ref:"addMform"},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Название режима")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTitleTooltip,callback:function(e){t.showTitleTooltip=e},expression:"showTitleTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTitleTooltip=!t.showTitleTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Например, 'Покладистый добрый преподаватель'")])],1),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.title,t.rules.required],solo:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),s("v-flex",{staticClass:"ml-3",attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Изображение")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showImageTooltip,callback:function(e){t.showImageTooltip=e},expression:"showImageTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showImageTooltip=!t.showImageTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Будет отображаться при воспроизведении подсказок во время прохождения тестирования пользователями")])],1),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"image/*",label:t.imageLoadText},on:{input:t.getUploadedImage}})],1),t._v(" "),s("v-flex",{staticClass:"pt-4",attrs:{xs12:"",sm3:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:""},on:{click:function(e){t.addMode()}}},[s("v-icon",{staticClass:"mr-2",attrs:{size:"24px"}},[t._v("\n\t\t\t\t\t\t\tadd\n\t\t\t\t\t\t")]),t._v("\n\t\t\t\t\tДобавить режим")],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successLoad?"success":"error",transition:"scale-transition",outline:""}},[t._v("\n\t\t\t\t        "+t._s(t.alert_message)+"\n\n\t\t\t\t    ")])],1)],1)],1),t._v(" "),t.successLoad?s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("div",{staticClass:"content-wrapper"},[s("v-layout",{attrs:{row:"",wrap:""}},t._l(t.modes,function(e){return s("v-flex",t._b({key:e.title,staticClass:"d-inline-block",attrs:{"px-1":"","py-1":""}},"v-flex",((o={}).xs3=!0,o),!1),[s("v-card",{attrs:{"max-width":"350","min-width":"350"}},[s("v-img",{attrs:{src:e.image,height:"200px"}}),t._v(" "),s("v-card-actions",[s("v-label",[t._v(t._s(e.name))]),t._v(" "),s("v-spacer"),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:""},nativeOn:{click:function(s){t.deleteMode(e.id)}},slot:"activator"},[s("v-icon",[t._v("delete")])],1),t._v(" "),s("span",[t._v("Удалить режим")])],1)],1)],1)],1);var o}))],1)])],1):t._e()],1)},staticRenderFns:[]};var R=c,F={components:{CreatedTest:b,Modes:s("VU/8")(Q,z,!1,function(t){s("MSXR")},null,null).exports},data:function(){return{tests:[],alert_message:"",alert:!1,successLoad:!1,showModesTooltip:!1,showTestsTooltip:!1,emptyPic:s("ne0W")}},methods:{getCreatedTests:function(){var t=this;l.a.get(R+"/api/courses-created/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.tests=s,t.tests.reverse(),t.successLoad=!0}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить список вопросов. Проверьте подключение к сети.",console.log(e)})},reloadPage:function(){window.location.reload(!0)}},mounted:function(){this.getCreatedTests()},computed:{success_message:function(){return this.tests.length?"Добавлено "+this.tests.length+" тестов:":"В вашем профиле нет созданных тестов."}}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"display-1"},[t._v("Управление тестами\n\t\t")])]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("h4",{staticClass:"title pt-2"},[t._v("Режимы")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showModesTooltip,callback:function(e){t.showModesTooltip=e},expression:"showModesTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showModesTooltip=!t.showModesTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Выбирая режим, пользователь может выбрать вариант восприятия информации от преподавателя. Например, можно привязть к разным режимам разных преподавателей, или одного, но в разных стилях подачи (добрый, ехидный и т.д.) К каждому из режимов можно добавлять свои подсказки к ответам, аудио- и видеозаписи, а также изображение лица преподавателя, которое будет появляться при воспроизведении подсказок. ")])],1),t._v(" "),s("div",{staticClass:"divider mt-2"}),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("modes")],1),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("h4",{staticClass:"title pt-2"},[t._v("Созданные тесты")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTestsTooltip,callback:function(e){t.showTestsTooltip=e},expression:"showTestsTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTestsTooltip=!t.showTestsTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Выбирая режим, пользователь может выбрать вариант восприятия информации от преподавателя. Например, можно привязть к разным режимам разных преподавателей, или одного, но в разных стилях подачи (добрый, ехидный и т.д.) К каждому из режимов можно добавлять свои подсказки к ответам, аудио- и видеозаписи, а также изображение лица преподавателя, которое будет появляться при воспроизведении подсказок. ")])],1),t._v(" "),s("div",{staticClass:"divider mt-2"}),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{staticClass:"mb-3",attrs:{round:"",color:"success",to:"add/test",dark:""}},[s("v-icon",{staticClass:"mr-2",attrs:{size:"24px"}},[t._v("\n\t\t\t\tadd\n\t\t\t")]),t._v("\n\t\tСоздать новый тест")],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[t.successLoad?s("p",[t._v(t._s(t.success_message))]):t._e(),t._v(" "),t._l(t.tests,function(e){return s("created-test",{attrs:{token:e.token,title:e.name,description:e.description,image:e.image?e.image:t.emptyPic,added:0,element:t.tests.indexOf(e),collection:t.tests}})})],2),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:"error"}},[t._v("\n        "+t._s(t.alert_message)+"\n\n\t      \t"),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1)],1)},staticRenderFns:[]};var B=s("VU/8")(F,H,!1,function(t){s("rvZS")},null,null).exports,W=s("iCN3"),j={components:{FileLoader:V},props:[],data:function(){return{}}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-layout",{attrs:{row:"",wrap:""}},[e("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!this.enabledAudio,checked:this.enabledAudio,label:this.audioLoadText},on:{input:this.getUploadedAudio}})],1)},staticRenderFns:[]},N={components:{StatsBox:s("VU/8")(j,E,!1,null,null,null).exports,VueAudio:W.a},data:function(){return{audio:"https://vk.com/mp3/audio_api_unavailable.mp3?extra=zvPOBZvIzxnImem6se9LyxDADKmOovDTBeLdyJrpzKHIDJGVy25Wr1HLDNKWl25wnJqXBxz1ztyWCKiVsdqUDwfJCZfVpvPJnvbWtKzZAv03nN02xOnRDffHlKr1mKXbzdrLuMvTCdbWqZLLn3LZmdjbzhPJmxfqCLjSzZ9emL9LzhbsDgWZzw9euvPurODAnujlx2n4DfPJrI9LB1PhAgnMAfvNtLHvuuWTtxmOCfaYA3n1vMDOBY54m25VvwjAn1HcA1f2qJn5me41Ce82ywThEtzsrLy#AqS2nZK"}},methods:{},mounted:function(){}},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-layout",{attrs:{row:"",wrap:""}},[e("stats-box"),this._v(" "),e("vue-audio",{attrs:{file:this.audio}})],1)},staticRenderFns:[]},K=s("VU/8")(N,G,!1,null,null,null).exports,Z=s("VU/8")(null,null,!1,null,null,null).exports,J=c,X={components:{FileInput:V},data:function(){var t=this;return{userdata:[],successLoad:!1,alert:!1,alert_message:!1,image:null,showImageTooltip:!1,minNameLen:2,maxNameLen:40,minSurnameLen:2,maxSurnameLen:50,minActivityLen:3,maxActivityLen:70,minPhoneLen:10,maxPhoneLen:15,minGroupLen:2,maxGroupLen:20,mask:"phone",rules:{FirstName:function(e){return e.length>=t.minNameLen&&e.length<=t.maxNameLen||"Длина названия должна быть в диапазоне от "+t.minNameLen+" до "+t.maxNameLen+" символов"},SurName:function(e){return e.length>=t.minSurnameLen&&e.length<=t.maxSurnameLen||"Длина названия должна быть в диапазоне от "+t.minSurnameLen+" до "+t.maxSurnameLen+" символов"},Activity:function(e){return e.length>=t.minActivityLen&&e.length<=t.maxActivityLen||"Длина названия должна быть в диапазоне от "+t.minActivityLen+" до "+t.maxActivityLen+" символов"},Group:function(e){return e.length>=t.minGroupLen&&e.length<=t.maxGroupLen||"Длина названия должна быть в диапазоне от "+t.minGroupLen+" до "+t.maxGroupLen+" символов"},required:function(t){return!!t||"Это необходимое поле"}}}},methods:{getUserData:function(){var t=this;l.a.get(J+"/api/profile/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.userdata=s,t.successLoad=!0}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить список режимов. Проверьте подключение к сети."})},onSubmit:function(){var t=this;if(!this.$refs.addUform.validate())return this.successLoad=!1,this.alert=!0,void(this.message="Не все обязательные поля были заполнены.");if(!this.successLoad){var e=new FormData;e.set("name",this.userdata.name),e.set("surname",this.userdata.surname),e.set("activity",this.userdata.activity),e.set("phone",this.userdata.phone),e.set("group",this.userdata.group),e.set("image",this.image),console.log(e),l.a.patch(J+"/api/profile/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){t.successLoad=!0,t.alert=!0,t.alert_message="Изменения успешно сохранены!",setTimeout(t.goBack,1200)}).catch(function(e){t.successLoad=!1,t.alert=!0,t.alert_message="Не удалось сохранить изменения. Проверьте подключение к сети."})}},getUploadedImage:function(t){this.image=t},goBack:function(){router.push("/")}},mounted:function(){this.getUserData()}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"addUform"},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"mb-3",attrs:{xs12:""}},[s("h4",{staticClass:"display-1"},[t._v("Настройки профиля")])]),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Имя")]),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.FirstName],solo:""},model:{value:t.userdata.name,callback:function(e){t.$set(t.userdata,"name",e)},expression:"userdata.name"}})],1),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Фамилия")]),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.SurName],solo:""},model:{value:t.userdata.surname,callback:function(e){t.$set(t.userdata,"surname",e)},expression:"userdata.surname"}})],1),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Место учебы\\работы")]),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.Activity],solo:""},model:{value:t.userdata.activity,callback:function(e){t.$set(t.userdata,"activity",e)},expression:"userdata.activity"}})],1),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Направление\\группа")]),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.Group],solo:""},model:{value:t.userdata.group,callback:function(e){t.$set(t.userdata,"group",e)},expression:"userdata.group"}})],1),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Телефон")]),t._v(" "),s("v-text-field",{attrs:{required:"",mask:t.mask,solo:""},model:{value:t.userdata.phone,callback:function(e){t.$set(t.userdata,"phone",e)},expression:"userdata.phone"}})],1),t._v(" "),s("v-flex",{staticClass:"ml-3",attrs:{xs12:"",sm5:""}},[s("v-label",[t._v("Аватар профиля")]),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"image/*",label:t.imageLoadText},on:{input:t.getUploadedImage}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:"",large:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("\n\t\t\t\t\t Сохранить изменения\n\t\t\t\t")])],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successLoad?"success":"error",transition:"scale-transition",outline:""}},[t._v("\n\t\t\t        "+t._s(t.alert_message)+"\n\n\t\t\t    ")])],1)],1)],1)},staticRenderFns:[]};var tt=s("VU/8")(X,Y,!1,function(t){s("ZVPb")},null,null).exports,et=s("mvHQ"),st=s.n(et),ot=s("bOdI"),nt=s.n(ot),at={props:["currentType","countAnswers","answers","answersQty","edit","modes"],components:{FileInput:V},data:function(){var t=this;return{isTrueText:"Ответ верен",imageLoadText:"Изображение к ответу",audio:"",rules:{required:function(t){return!!t||"Это необходимое поле"},maxAns:function(e){return e>=2&&e<=t.localCountAnswers&&e<=t.maxIncludedAnswers||"Введите значение не больше количества элементов, добавленных выше, и также не превышающее "+t.maxIncludedAnswers},weight:function(e){return e>=t.minWeight&&e<=t.maxWeight||"Введите значение в диапазоне от "+t.minWeight+" до "+t.maxWeight},priority:function(e){return e>=t.minPriority&&e<=t.maxPriority||"Введите значение в диапазоне от "+t.minPriority+" до "+t.maxPriority},duplicatePriority:function(e){return!t.findDuplicates(e)||"Такое значение уже есть у другого ответа"},answer:function(e){return!e||!!e&&e.length<=t.maxAnswerLength||"Максимальная длина поля "+t.maxAnswerLength+" символов"},comment:function(e){return!e||!!e&&e.length<=t.maxCommentLength||"Максимальная длина поля "+t.maxCommentLength+" символов"},hint:function(e){return!e||!!e&&e.length<=t.maxHintLength||"Максимальная длина поля "+t.maxHintLength+" символов"}},oneAnswerRadios:0,maxAnswers:15,minAnswers:2,maxAnswerLength:250,maxCommentLength:150,maxHintLength:300,minWeight:0,maxWeight:1e3,minPriority:1,maxPriority:15,maxVideoLength:150,maxIncludedAnswers:8,showAnswerTooltop:!1,showCommentTooltip:!1,showWeightTooltip:!1,showMediaTooltip:!1,showHintTooltip:!1,showWeight2typeTooltip:!1,showAnswersTooltip:!1,showQtyTooltip:!1}},methods:{incLCA:function(){this.localCountAnswers++,this.$emit("push")},decLCA:function(){this.localCountAnswers--,this.answers.pop()},findDuplicates:function(t){for(var e=!1,s=0;s<this.answers.length;++s)if(this.answers[s].priority==t){if(e)return!0;e=!0}return!1},checkRadios:function(t){if(2==this.currentType)for(var e=0;e<this.answers.length;++e)this.answers[e].correct=e==t},getUploadedAudio:function(t,e,s){this.$emit("update:answersAudio",{audio:t,index:e,mode:s})},getUploadedImage:function(t,e){this.$emit("update:answersImage",{image:t,index:e})},changeCheck:function(t,e){this.answers[t].weight=this.answers[t].correct?256:0},changeAudio:function(t,e){this.$emit("update:changeAudio",{index:t,mode:e})},changeImage:function(t){this.$emit("update:changeImage",t)},deleteFile:function(t,e,s){t?this.answers[e].audios[s]=null:this.answers[e].image=null},clickHintTooltip:function(t,e){this.$emit("update:clickHintTooltip",{answer:t,mode:e})},clickVideoTooltip:function(t,e){this.$emit("update:clickVideoTooltip",{answer:t,mode:e})}},computed:{localCountAnswers:{get:function(){return this.countAnswers},set:function(t){this.$emit("update:countAnswers",t)}}},watch:{currentType:function(t){2==t&&this.checkRadios()},countAnswers:function(t){this.edit||(this.answersQty=t,this.$emit("update:answersQty",this.answersQty))},answersQty:function(t){this.$emit("update:answersQty",t)}}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-flex",{attrs:{xs12:""}},[2==t.currentType||3==t.currentType?s("v-layout",{attrs:{row:"",wrap:""}},[2==t.currentType?s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Максимальный балл за ответ")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showWeight2typeTooltip,callback:function(e){t.showWeight2typeTooltip=e},expression:"showWeight2typeTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showWeight2typeTooltip=!t.showWeight2typeTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Данная система тестирования такова, что она позволяет не только выполнить срез знаний пользователя, но и заставить его подумать и научиться, если он не очень качественно знает материал. Пользователю предоставляются дополнительные попытки на ответ в случае неверных ответов. Но с каждым неверным ответом количество возможных баллов, которые можно получить из каждого ответа, делятся пополам, если они не были отмечены верно.")])],1),t._v(" "),s("v-text-field",{staticClass:"mr-2",attrs:{type:"number",value:"256",rules:[t.rules.weight],solo:"",required:""}})],1):t._e(),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("div",{staticClass:"headline"},[1!=t.currentType?s("span",[t._v("\n\t\t\t\t\t\tОтветы: \n\t\t\t\t\t")]):t._e(),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAnswersTooltip,callback:function(e){t.showAnswersTooltip=e},expression:"showAnswersTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showAnswersTooltip=!t.showAnswersTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("p",[t._v("Самым важным этапом является добавление вариантов ответов в вопрос. К каждому варианту ответа укажите текст ответа, отметьте, верен ли этот вариант ответа и обозначьте приоритет проверки. Вы можете добавить не более 15 вариантов ответа к одному вопросу. Нужно учитывать, что в процессе прохождения теста, тестируемому может быть показано только до 8 вариантов, которые будут выбраны случайно из всех добавленных. При этом гарантируется, что все правильные варианты будут показаны.")])],1)],1)])],1):t._e(),t._v(" "),s("v-radio-group",{model:{value:t.oneAnswerRadios,callback:function(e){t.oneAnswerRadios=e},expression:"oneAnswerRadios"}},t._l(t.answers,function(e){return s("v-layout",{attrs:{row:"",wrap:""}},[1==t.currentType?s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("h4",{staticClass:"headline mb-2"},[t._v("Ответ: ")])]),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl4:""}},[s("v-label",[t._v("Правильный ответ")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAnswerTooltop,callback:function(e){t.showAnswerTooltop=e},expression:"showAnswerTooltop"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showAnswerTooltop=!t.showAnswerTooltop}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Ответ может быть как числовым, так и текстовым. Ожидается, что ответ тестируемого должен полностью совпасть со значением, указанным в данном поле.")])],1),t._v(" "),s("v-text-field",{staticClass:"mr-2",attrs:{type:"text",solo:"",rules:[t.rules.required,t.rules.answer],required:"",clearable:""},model:{value:e.text,callback:function(s){t.$set(e,"text",s)},expression:"answer.text"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl4:""}},[s("v-label",[t._v("Комментарий к формату ответа")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showCommentTooltip,callback:function(e){t.showCommentTooltip=e},expression:"showCommentTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showCommentTooltip=!t.showCommentTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v('Опциональное поле. Помогает избежать неприятных ошибок, связанных с введением пользователем ответа в формате, не совпадающем с вашей задумкой. Например, можно указать здесь: "Ответ введите кириллицей с маленькой буквы, каждое новое слово через пробел".')])],1),t._v(" "),s("v-text-field",{staticClass:"ml-2",attrs:{type:"text",rules:[t.rules.comment],solo:"",clearable:""},model:{value:e.comment,callback:function(s){t.$set(e,"comment",s)},expression:"answer.comment"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl4:""}},[s("v-label",[t._v("Максимальный балл за ответ")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showWeightTooltip,callback:function(e){t.showWeightTooltip=e},expression:"showWeightTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showWeightTooltip=!t.showWeightTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Данная система тестирования такова, что она позволяет не только выполнить срез знаний пользователя, но и заставить его подумать и научиться, если он не очень качественно знает материал. Пользователю предоставляются дополнительные попытки на ответ в случае неверных или неполных ответов. Но с каждым неверным ответом количество возможных баллов, которые можно получить из ответа, делятся пополам, если ответ не был введен верно.")])],1),t._v(" "),s("v-text-field",{staticClass:"mr-2",attrs:{type:"number",value:"0",rules:[t.rules.weight],required:"",solo:""},model:{value:e.weight,callback:function(s){t.$set(e,"weight",s)},expression:"answer.weight"}})],1),t._v(" "),t._l(t.modes,function(o){return s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("p",{staticClass:"title"},[t._v(t._s(t.modes.indexOf(o)+1)+". Режим: "+t._s(o.name))])]),t._v(" "),t.edit?s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Замена изображения и аудио:")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:e.showMediaTooltip,callback:function(s){t.$set(e,"showMediaTooltip",s)},expression:"answer.showMediaTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.showMediaTooltip=!e.showMediaTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Если вы хотите оставить изображение или аудио без изменений, убедитесь, что галочки ниже не отмечены. Если же хотите удалить их, отметьте галочку, но не загружайте новый файл. Для изменения изображения или аудио загрузите новый файл.")])],1)],1):t._e(),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[t.edit?t._e():s("v-label",[t._v("Аудиоподсказка")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},nativeOn:{click:function(s){t.changeAudio(t.answers.indexOf(e),t.modes.indexOf(o))}},model:{value:e.enabledAudio[t.modes.indexOf(o)],callback:function(s){t.$set(e.enabledAudio,t.modes.indexOf(o),s)},expression:"answer.enabledAudio[modes.indexOf(mode)]"}}),t._v(" "),s("file-input",{ref:"fileInput",refInFor:!0,staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!e.enabledAudio[t.modes.indexOf(o)],checked:e.enabledAudio[t.modes.indexOf(o)],label:e.audioLoadText[t.modes.indexOf(o)]},on:{input:function(s){t.getUploadedAudio(s,t.answers.indexOf(e),t.modes.indexOf(o))},"update:deleteFile":function(s){t.deleteFile(1,t.answers.indexOf(e),t.modes.indexOf(o))}}})],1)],1)],1),t._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[s("v-label",[t._v("Текстовая подсказка")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:e.showHintTooltip[t.modes.indexOf(o)],callback:function(s){t.$set(e.showHintTooltip,t.modes.indexOf(o),s)},expression:"answer.showHintTooltip[modes.indexOf(mode)]"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(s){t.clickHintTooltip(t.answers.indexOf(e),t.modes.indexOf(o))}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Опциональное поле. Если тестируемый ответит неверно, то всплывет подсказка, которая должна содержать намек на то, как правильно находить решение. В идеале постарайтесь, чтобы подсказка не слишком сильно облегчала задачу, но и позволяла тестируемому дать направление для размышлений. Также есть возможность загрузить аудиоподсказку, дополняющую или дублирующую текстовую.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"text",rules:[t.rules.hint],clearable:"",solo:""},model:{value:e.hints[t.modes.indexOf(o)],callback:function(s){t.$set(e.hints,t.modes.indexOf(o),s)},expression:"answer.hints[modes.indexOf(mode)]"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[s("v-label",[t._v("Видеоподсказка (ссылка)")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:e.showVideoTooltip[t.modes.indexOf(o)],callback:function(s){t.$set(e.showVideoTooltip,t.modes.indexOf(o),s)},expression:"answer.showVideoTooltip[modes.indexOf(mode)]"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(s){t.clickVideoTooltip(t.answers.indexOf(e),t.modes.indexOf(o))}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Опциональное поле. Вы можете добавить видеореакцию на ответ, содержащую намек на то, в чем может быть неправ учащийся. Если добавлена ссылка на видео, загруженное аудио воспроизводиться при прохождении не будет.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"text",clearable:"",solo:""},model:{value:e.videos[t.modes.indexOf(o)],callback:function(s){t.$set(e.videos,t.modes.indexOf(o),s)},expression:"answer.videos[modes.indexOf(mode)]"}})],1)],1)],1)})],2):2==t.currentType||3==t.currentType?s("v-layout",{attrs:{row:"",wrap:""}},[s("div",{staticClass:"divider"}),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Текст ответа")]),t._v(" "),s("div",{staticClass:"ansPrefix title"},[t._v(t._s(t.answers.indexOf(e)+1)+".")]),t._v(" "),s("v-text-field",{attrs:{type:"text",rules:[t.rules.required,t.rules.answer],required:"",solo:"",clearable:""},model:{value:e.text,callback:function(s){t.$set(e,"text",s)},expression:"answer.text"}})],1),t._v(" "),3==t.currentType?s("v-flex",{attrs:{xs12:"",sm6:"","px-1":""}},[s("v-label",[t._v("Максимальный балл")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Данная система тестирования такова, что она позволяет не только выполнить срез знаний пользователя, но и заставить его подумать и научиться, если он не очень качественно знает материал. Пользователю предоставляются дополнительные попытки на ответ в случае неверных или неполных ответов. Но с каждым неверным ответом количество возможных баллов, которые можно получить из каждого ответа, делятся пополам, если они не были отмечены верно.")])],1),t._v(" "),s("v-text-field",{attrs:{disabled:!e.correct,type:"number",rules:[t.rules.weight],value:0,required:"",solo:"",clearable:""},model:{value:e.weight,callback:function(s){t.$set(e,"weight",s)},expression:"answer.weight"}})],1):t._e(),t._v(" "),3==t.currentType?s("v-flex",{attrs:{xs12:"",sm6:"","px-1":""}},[s("v-label",[t._v("Приоритет проверки")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Приоритет проверки означает, в каком порядке в случае неверного ответа будет воспроизводиться подсказка для пользователя. Приоритеты должна начинаться с 1 и идти по порядку. Этим значениям и будет соответствовать порядок проверки вариантов ответа на правильность. Например, пользователь указал как верные ответы, которым соответствуют приоритеты 2 и 4. Если ответ с приоритетом 1 являлся верным, а пользователь его не отметил - пользователю будет выведена подсказка, соответствующая ответу с приоритетом 1. А если этот ответ и был неверен, проверка перейдет к ответу с приоритетом 2 и проверит его. Если наш ответ с приоритетом 2, который отметил пользователь, был бы неверным - то пользователю была бы показана подсказка к ответу с приоритетом 2. А если этот ответ действительно верен, то проверка пойдет дальше. Таким образом, внимательно расставьте приоритеты к ответам (например, от самых простых вариантов ответа до самых сложных). Как правило, обычно бывает уместным первыми приоритетами указывать неверные ответы, так как за них не начисляются баллы, а последними приоритетами - верные, по мере увеличения баллов за ответ.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.priority,t.rules.duplicatePriority],solo:"",required:""},model:{value:e.priority,callback:function(s){t.$set(e,"priority",s)},expression:"answer.priority"}})],1):t._e(),t._v(" "),t.edit?s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Замена изображения и аудио:")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:e.showMediaTooltip,callback:function(s){t.$set(e,"showMediaTooltip",s)},expression:"answer.showMediaTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.showMediaTooltip=!e.showMediaTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Если вы хотите оставить изображение или аудио без изменений, убедитесь, что галочки ниже не отмечены. Если же хотите удалить их, отметьте галочку, но не загружайте новый файл. Для изменения изображения или аудио загрузите новый файл.")])],1)],1):t._e(),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"","mb-3":""}},[t.edit?t._e():s("v-label",[t._v("Изображение: ")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},nativeOn:{click:function(s){t.changeImage(t.answers.indexOf(e))}},model:{value:e.enabledImage,callback:function(s){t.$set(e,"enabledImage",s)},expression:"answer.enabledImage"}}),t._v(" "),s("file-input",{ref:"fileInput",refInFor:!0,staticClass:"fileBtn",attrs:{accept:"image/*",checked:e.enabledImage,dis:!e.enabledImage,label:e.imageLoadText},on:{"update:deleteFile":function(s){t.deleteFile(0,t.answers.indexOf(e))},input:function(s){t.getUploadedImage(s,t.answers.indexOf(e))}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[3==t.currentType?s("v-switch",{attrs:{label:t.isTrueText},on:{change:function(s){t.changeCheck(t.answers.indexOf(e),s)}},model:{value:e.correct,callback:function(s){t.$set(e,"correct",s)},expression:"answer.correct"}}):t._e(),t._v(" "),2==t.currentType?s("v-radio",{staticClass:"ma-3",attrs:{label:t.isTrueText},on:{change:function(e){t.checkRadios(e)}},model:{value:t.answers.indexOf(e),callback:function(e){t.$set(t.answers,"indexOf(answer)",e)},expression:"answers.indexOf(answer)"}}):t._e()],1),t._v(" "),t._l(t.modes,function(o){return s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("p",{staticClass:"title"},[t._v(t._s(t.modes.indexOf(o)+1)+". Режим: "+t._s(o.name))])]),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[t.edit?t._e():s("v-label",[t._v("Аудиоподсказка: ")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},nativeOn:{click:function(s){t.changeAudio(t.answers.indexOf(e),t.modes.indexOf(o))}},model:{value:e.enabledAudio[t.modes.indexOf(o)],callback:function(s){t.$set(e.enabledAudio,t.modes.indexOf(o),s)},expression:"answer.enabledAudio[modes.indexOf(mode)]"}}),t._v(" "),s("file-input",{ref:"fileInput",refInFor:!0,staticClass:"fileBtn",attrs:{accept:"audio/*",checked:e.enabledAudio[t.modes.indexOf(o)],dis:!e.enabledAudio[t.modes.indexOf(o)],label:e.audioLoadText[t.modes.indexOf(o)]},on:{input:function(s){t.getUploadedAudio(s,t.answers.indexOf(e),t.modes.indexOf(o))},"update:deleteFile":function(s){t.deleteFile(1,t.answers.indexOf(e),t.modes.indexOf(o))}}})],1)],1)],1),t._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[s("v-label",[t._v("Текстовая подсказка")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:e.showHintTooltip[t.modes.indexOf(o)],callback:function(s){t.$set(e.showHintTooltip,t.modes.indexOf(o),s)},expression:"answer.showHintTooltip[modes.indexOf(mode)]"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(s){t.clickHintTooltip(t.answers.indexOf(e),t.modes.indexOf(o))}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Опциональное поле. Если тестируемый ответит неверно, то всплывет подсказка, которая должна содержать намек на то, как правильно находить решение. В идеале постарайтесь, чтобы подсказка не слишком сильно облегчала задачу, но и позволяла тестируемому дать направление для размышлений. Также есть возможность загрузить аудиоподсказку, дополняющую или дублирующую текстовую.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"text",rules:[t.rules.hint],solo:""},model:{value:e.hints[t.modes.indexOf(o)],callback:function(s){t.$set(e.hints,t.modes.indexOf(o),s)},expression:"answer.hints[modes.indexOf(mode)]"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[s("v-label",[t._v("Видеоподсказка (ссылка)")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:e.showVideoTooltip[t.modes.indexOf(o)],callback:function(s){t.$set(e.showVideoTooltip,t.modes.indexOf(o),s)},expression:"answer.showVideoTooltip[modes.indexOf(mode)]"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(s){t.clickVideoTooltip(t.answers.indexOf(e),t.modes.indexOf(o))}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Опциональное поле. Вы можете добавить видеореакцию на ответ, содержащую намек на то, в чем может быть неправ учащийся. Если добавлена ссылка на видео, загруженное аудио воспроизводиться при прохождении не будет.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"text",clearable:"",solo:""},model:{value:e.videos[t.modes.indexOf(o)],callback:function(s){t.$set(e.videos,t.modes.indexOf(o),s)},expression:"answer.videos[modes.indexOf(mode)]"}})],1)],1)],1)})],2):t._e()],1)})),t._v(" "),2==t.currentType||3==t.currentType?s("v-layout",{attrs:{row:"",wrap:""}},[s("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[s("v-flex",{staticClass:"mb-3",attrs:{xs12:""}},[s("v-tooltip",{attrs:{bottom:""}},[t.localCountAnswers<t.maxAnswers?s("v-btn",{staticClass:"elevation-3",attrs:{slot:"activator",fab:"",color:"success",dark:""},on:{click:function(e){t.incLCA()}},slot:"activator"},[s("v-icon",{attrs:{size:"32px"}},[t._v("\n\t\t\t\t\t\t\t\tplus_one\n\t\t\t\t\t\t\t")])],1):t._e(),t._v(" "),s("span",[t._v("Добавить вариант ответа")])],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[t.localCountAnswers>t.minAnswers?s("v-btn",{staticClass:"elevation-3",attrs:{slot:"activator",fab:"",color:"error",dark:""},on:{click:function(e){t.decLCA()}},slot:"activator"},[s("v-icon",{attrs:{size:"32px"}},[t._v("\n\t\t\t\t\t\t\t\tclose\n\t\t\t\t\t\t\t")])],1):t._e(),t._v(" "),s("span",[t._v("Удалить последний вариант ответа")])],1)],1)],1),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Количество ответов, включаемых в вопрос")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showQtyTooltip,callback:function(e){t.showQtyTooltip=e},expression:"showQtyTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showQtyTooltip=!t.showQtyTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Поле показывает, сколько вариантов ответов из добавленных выше (случайным выбором) будет предложено тестируемому для ответа. Максимально допустимое значение - 8.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.maxAns],value:t.countAnswers,required:"",solo:""},model:{value:t.answersQty,callback:function(e){t.answersQty=e},expression:"answersQty"}})],1)],1):t._e()],1)},staticRenderFns:[]};var rt=s("VU/8")(at,it,!1,function(t){s("ER0B")},null,null).exports,lt=c,ct={components:{FileInput:V,AddAnswers:rt},data:function(){var t,e=this;return t={enabledAttempts:!1,enabledTimer:!1,enabledImage:!1,enabledAudio:!1,maxDifficulty:100,minDifficulty:1,maxAttempts:100,minAttempts:1,minTimer:10,maxTimer:3600,maxTitleLength:100,minTitleLength:6,maxQuestionLength:2e3,minQuestionLength:12,maxVideoLength:150,title:"",text:"",difficulty:1,currentType:1,countAnswers:1,attempts:null,timer:null,answersQty:1,showTitleTooltip:!1,showTextTooltip:!1,showAttemptsTooltip:!1,showTimerTooltip:!1,showQuestionTooltip:!1,showTypeTooltip:!1,modes:[],selectedType:[],answerTypes:[{id:1,val:"Ввод значения"},{id:2,val:"Выбор одного варианта"},{id:3,val:"Выбор нескольких вариантов"}],rules:{required:function(t){return!!t||"Это необходимое поле"},title:function(t){return t.length>=e.minTitleLength&&t.length<=e.maxTitleLength||"Допустимая длина: от "+e.minTitleLength+" до "+e.maxTitleLength+" символов"},question:function(t){return t.length>=e.minQuestionLength&&t.length<=e.maxQuestionLength||"Допустимая длина: от "+e.minQuestionLength+" до "+e.maxQuestionLength+" символов"},difficulty:function(t){return t>=e.minDifficulty&&t<=e.maxDifficulty||"Введите значение от "+e.minDifficulty+" до "+e.maxDifficulty},attempts:function(t){return!e.enabledAttempts||t>=e.minAttempts&&t<=e.maxAttempts||"Введите значение в диапазоне от "+e.minAttempts+" до "+e.maxAttempts},timer:function(t){return!e.enabledTimer||t>=e.minTimer&&t<=e.maxTimer||"Введите значение в диапазоне от "+e.minTimer+" до "+e.maxTimer},video:function(t){return t.length<=e.maxVideoLength||"Допустимая длина не более "+e.maxVideoLength+" символов"}},message:"",alert:!1,successSet:!1,valid:!1,questionId:"",answers:[]},nt()(t,"enabledAudio",[]),nt()(t,"videos",[]),nt()(t,"audios",[]),nt()(t,"audioLoadText",[]),nt()(t,"image",""),nt()(t,"imageLoadText","Изображение к вопросу"),t},methods:{getUploadedQImage:function(t){this.image=t},getUploadedQAudio:function(t,e){this.audios[e]=t},getUploadedAudio:function(t){this.answers[t.index].audios[t.mode]=t.audio},getUploadedImage:function(t){this.answers[t.index].image=t.image},clickHintTooltip:function(t){this.answers[t.answer].showHintTooltip[t.mode]=!this.answers[t.answer].showHintTooltip[t.mode],this.answers[t.answer].showHintTooltip.push(null),this.answers[t.answer].showHintTooltip.pop()},clickVideoTooltip:function(t){this.answers[t.answer].showVideoTooltip[t.mode]=!this.answers[t.answer].showVideoTooltip[t.mode],this.answers[t.answer].showVideoTooltip.push(null),this.answers[t.answer].showVideoTooltip.pop()},changeQAudio:function(t){this.enabledAudio[t]||(this.audios[t]=null)},onSubmit:function(){var t=this;if(!this.$refs.addQform.validate())return this.successSet=!1,this.alert=!0,void(this.message="Не все обязательные поля были заполнены.");if(!this.successSet){var e=new FormData;e.set("text",this.text),e.set("title",this.title),e.set("attempts_number",this.attempts),e.set("timer",this.timer),e.set("answer_type",this.currentType),e.set("answers_number",this.answersQty),e.set("difficulty",this.difficulty),e.set("image",this.image);var s=null;1==this.currentType&&(s=this.answers[0].comment),e.set("comment",s);var o={};e.forEach(function(t,e){o[e]=t});var n=st()(o);console.log(n),l.a.post(lt+"/api/questions/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){t.questionId=e.data.id;for(var s=function(e){console.log("im here");var s=new FormData;s.set("question",t.questionId),s.set("mode",t.modes[e].id),s.set("audio",t.audios[e]),s.set("video",t.videos[e]);var o={};s.forEach(function(t,e){o[e]=t});var n=st()(o);console.log(n),l.a.post(lt+"/api/questions_media/",s,{headers:{Authorization:d.getAuthenticationHeader(t)},params:{}}).then(function(s){if(console.log(t.questionId+" "+t.modes[e].id+" success questions_media"),e==t.modes.length-1){for(var o=0;o<t.answers.length;++o)t.answers[o].question=t.questionId;for(var n=new FormData,a=0;a<t.answers.length;a++)n.append("image",t.answers[a].image),n.append("text",t.answers[a].text),2!=t.currentType?n.append("priority",t.answers[a].priority):t.answers[a].correct?n.append("priority",t.answers.length):n.append("priority",a+1),n.append("correct",t.answers[a].correct),2!=t.currentType||t.answers[a].correct?n.append("weight",t.answers[a].weight):n.append("weight",0),n.append("question",t.questionId);l.a.post(lt+"/api/answers/",n,{headers:{Authorization:d.getAuthenticationHeader(t)},params:{}}).then(function(e){var s=e.data.answers;if(console.log(s),s.length!=t.answers.length)return console.log("server response length error"),t.successSet=!1,t.alert=!0,void(t.message="Не удалось добавить вопрос. Произошла ошибка.");for(var o=function(e){for(var o=function(o){console.log("start of end"+t.modes.length);var n=new FormData;n.set("answer",s[e]),n.set("mode",t.modes[o].id),n.set("audio",t.answers[e].audios[o]),n.set("video",t.answers[e].videos[o]),n.set("text",t.answers[e].hints[o]);var a={};n.forEach(function(t,e){a[e]=t});var i=st()(a);console.log(i),l.a.post(lt+"/api/answers_hint/",n,{headers:{Authorization:d.getAuthenticationHeader(t)},params:{}}).then(function(n){console.log(s[e]+" "+t.modes[o].id+" success answers_hint"),e==s.length-1&&o==t.modes.length-1&&(t.successSet=!0,t.alert=!0,t.message="Вопрос успешно добавлен.")}).catch(function(e){t.successSet=!1,t.alert=!0,t.message="Не удалось добавить вопрос. Проверьте подключение к сети."})},n=0;n<t.modes.length;n++)o(n)},n=0;n<s.length;n++)o(n)}).catch(function(e){t.successSet=!1,t.alert=!0,t.message="Не удалось добавить вопрос. Проверьте подключение к сети."})}}).catch(function(e){t.successSet=!1,t.alert=!0,t.message="Не удалось добавить вопрос. Проверьте подключение к сети.111"})},o=0;o<t.modes.length;o++)s(o)}).catch(function(e){t.alert=!0,t.successSet=!1,t.message="Не удалось добавить вопрос. Проверьте подключение к сети."})}},reloadPage:function(){window.location.reload(!0)},goBack:function(){jt.push("/questions")},pushAnswer:function(){var t=!1,e=256;1==this.currentType&&(t=!0),3==this.currentType&&(e=0),this.answers.push({audios:[],hints:[],videos:[],enabledAudio:[],audioLoadText:[],showHintTooltip:[],showVideoTooltip:[],image:null,text:null,priority:this.answers.length+1,correct:t,weight:e,comment:null,question:0,enabledImage:!1,imageLoadText:"Изображение не загружено",show:!1});for(var s=0;s<this.modes.length;s++)this.answers[this.answers.length-1].audios.push(null),this.answers[this.answers.length-1].enabledAudio.push(!1),this.answers[this.answers.length-1].showHintTooltip.push(!1),this.answers[this.answers.length-1].showVideoTooltip.push(!1),this.answers[this.answers.length-1].videos.push(""),this.answers[this.answers.length-1].audioLoadText.push("Аудио не загружено"),this.answers[this.answers.length-1].hints.push("")},hideAlert:function(){this.alert=!1},startTimer:function(){setTimeout(this.hideAlert,4e3)},getModeData:function(){var t=this;l.a.get(lt+"/api/strict_modes/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.modes=s,t.successLoad=!0;for(var o=0;o<t.modes.length;o++)t.enabledAudio[o]=!1,t.videos[o]="",t.audios[o]=null,t.audioLoadText[o]="Аудиозапись не загружена";t.pushAnswer()}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить список режимов. Проверьте подключение к сети."})}},watch:{currentType:function(t){for(1==t?this.countAnswers=1:2!=t&&3!=t||(this.countAnswers=2),this.answers.splice(0);this.answers.length<this.countAnswers;)this.pushAnswer();console.log("countAnswers: "+this.countAnswers),console.log("array len: "+this.answers.length)},enabledImage:function(t){t||(this.image="")},enabledAttempts:function(t){this.attempts=t?3:""},enabledTimer:function(t){this.timer=t?60:""},attempts:function(t){this.enabledAttempts?this.attempts=t:this.attempts=null},timer:function(t){this.enabledTimer?this.timer=t:this.timer=null},alert:function(t){t&&this.startTimer()}},mounted:function(){this.getModeData()}},ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"addQform",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-container",[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("h4",{staticClass:"display-1"},[t._v("Создание нового вопроса")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showQuestionTooltip,callback:function(e){t.showQuestionTooltip=e},expression:"showQuestionTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showQuestionTooltip=!t.showQuestionTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Сейчас вы создаете новый вопрос, который впоследствие может быть добавлен в ваши курсы. В процессе прохождения теста пользователь сможет отвечать в один момент времени только на один вопрос.")])],1)],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Краткое название вопроса")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTitleTooltip,callback:function(e){t.showTitleTooltip=e},expression:"showTitleTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTitleTooltip=!t.showTitleTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Поле будет видно только вам в списке добавленных вопросов для удобства навигации по ним.")])],1),t._v(" "),s("v-text-field",{attrs:{placeholder:"Например, 'Задание по линейным уравнениям'",required:"",clearable:"",rules:[t.rules.title],solo:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Формулировка вопроса")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTextTooltip,callback:function(e){t.showTextTooltip=e},expression:"showTextTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTextTooltip=!t.showTextTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Поле формулировки вопроса должно содержать полную постановку задачи.")])],1),t._v(" "),s("v-textarea",{attrs:{placeholder:"Например, 'Найдите корень уравнения 2x - 5 = 14.'",rules:[t.rules.question],required:"",clearable:"",solo:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-label",[t._v("Количество попыток")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAttemptsTooltip,callback:function(e){t.showAttemptsTooltip=e},expression:"showAttemptsTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showAttemptsTooltip=!t.showAttemptsTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Необязательное поле. Если не указать количество попыток, то они закончатся, когда обнулятся баллы.")])],1)],1),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAttempts,callback:function(e){t.enabledAttempts=e},expression:"enabledAttempts"}}),t._v(" "),s("v-text-field",{attrs:{type:"number",disabled:!t.enabledAttempts,rules:[t.rules.attempts],clearable:"",solo:"","persistent-hint":""},model:{value:t.attempts,callback:function(e){t.attempts=e},expression:"attempts"}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-label",[t._v("Таймер на вопрос")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTimerTooltip,callback:function(e){t.showTimerTooltip=e},expression:"showTimerTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTimerTooltip=!t.showTimerTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Необязательное поле. Если не указать таймер - время на ответ будет неограниченно. Значение указывается в секундах")])],1)],1),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledTimer,callback:function(e){t.enabledTimer=e},expression:"enabledTimer"}}),t._v(" "),s("v-text-field",{attrs:{type:"number",disabled:!t.enabledTimer,rules:[t.rules.timer],clearable:"",solo:""},model:{value:t.timer,callback:function(e){t.timer=e},expression:"timer"}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledImage,callback:function(e){t.enabledImage=e},expression:"enabledImage"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"image/*",dis:!t.enabledImage,checked:t.enabledImage,label:t.imageLoadText},on:{input:function(e){t.getUploadedQImage(e)}}})],1)],1),t._v(" "),t._l(t.modes,function(e){return s("v-flex",{attrs:{xs12:""}},[s("div",{staticClass:"divider"}),t._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("p",{staticClass:"title"},[t._v(t._s(t.modes.indexOf(e)+1)+". Режим: "+t._s(e.name))])])],1),t._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","px-2":""}},[s("v-label",[t._v("Видео к вопросу")]),t._v(" "),s("v-text-field",{attrs:{type:"text",rules:[t.rules.video],clearable:"",solo:""},model:{value:t.videos[t.modes.indexOf(e)],callback:function(s){t.$set(t.videos,t.modes.indexOf(e),s)},expression:"videos[modes.indexOf(mode)]"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"","px-4":""}},[s("v-label",[t._v("Голосовое воспроизведение")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},nativeOn:{click:function(s){t.changeQAudio(t.modes.indexOf(e))}},model:{value:t.enabledAudio[t.modes.indexOf(e)],callback:function(s){t.$set(t.enabledAudio,t.modes.indexOf(e),s)},expression:"enabledAudio[modes.indexOf(mode)]"}}),t._v(" "),s("file-input",{ref:"fileInput",refInFor:!0,staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!t.enabledAudio[t.modes.indexOf(e)],checked:t.enabledAudio[t.modes.indexOf(e)],label:t.audioLoadText[t.modes.indexOf(e)]},on:{input:function(s){t.getUploadedQAudio(s,t.modes.indexOf(e))}}})],1)],1)],1)],1)}),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("v-flex",{attrs:{xs10:""}},[s("v-slider",{attrs:{max:t.maxDifficulty,min:t.minDifficulty,label:"Сложность вопроса"},model:{value:t.difficulty,callback:function(e){t.difficulty=e},expression:"difficulty"}})],1),t._v(" "),s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{attrs:{type:"number",rules:[t.rules.difficulty],solo:""},model:{value:t.difficulty,callback:function(e){t.difficulty=e},expression:"difficulty"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Тип ответов")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTypeTooltip,callback:function(e){t.showTypeTooltip=e},expression:"showTypeTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTypeTooltip=!t.showTypeTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v('Выберите один из трех типов ответов, которые должен дать пользователь на вопрос. Тип "ввод значения" означает, что пользователь должен ввести ответ сам. Тип "выбор одного варианта" означает, что у пользователя будет выбор из нескольких ответов, и он должен указать только один верный. Тип "выбор нескольких вариантов" означает, что у пользователя будет выбор из нескольких ответов, и он должен отметить среди них верные (должно быть от 1 верного варианта до количества, равного количеству вариантов ответов). ')])],1),t._v(" "),s("v-select",{attrs:{items:t.answerTypes,"item-value":"id","item-text":"val",label:"Тип ответа",solo:"",required:""},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("add-answers",{attrs:{currentType:t.currentType,countAnswers:t.countAnswers,answers:t.answers,answersQty:t.answersQty,modes:t.modes},on:{"update:countAnswers":function(e){t.countAnswers=e},"update:answersQty":function(e){t.answersQty=e},push:function(e){t.pushAnswer()},"update:answersAudio":function(e){t.getUploadedAudio(e)},"update:answersImage":function(e){t.getUploadedImage(e)},"update:clickHintTooltip":function(e){t.clickHintTooltip(e)},"update:clickVideoTooltip":function(e){t.clickVideoTooltip(e)}}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successSet?"success":"error",transition:"scale-transition"}},[t._v("\n\t\t\t        "+t._s(t.message)+"\n\n\t\t\t\t    "),t.successSet?s("v-btn",{attrs:{to:"/questions",flat:""}},[t._v("Вернутьcя к вопросам")]):t._e(),t._v(" "),t.successSet?t._e():s("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("Попробовать еще раз")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:"",large:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("\n\t\t\t\t\t\t Добавить вопрос\n\t\t\t\t\t")])],1)],2)],1)],1)},staticRenderFns:[]};var dt=s("VU/8")(ct,ut,!1,function(t){s("Xvs9")},null,null).exports,vt=c,mt={components:{FileInput:V,AddAnswers:rt},data:function(){var t=this;return{enabledAttempts:!1,enabledTimer:!1,enabledImage:!1,enabledAudio:!1,showMediaTooltip:!1,edit:!0,maxDifficulty:100,minDifficulty:1,maxAttempts:100,minAttempts:1,minTimer:10,maxTimer:3600,maxTitleLength:100,minTitleLength:6,maxQuestionLength:2e3,minQuestionLength:12,selectedType:[],answerTypes:[{id:1,val:"Ввод значения"},{id:2,val:"Выбор одного варианта"},{id:3,val:"Выбор нескольких вариантов"}],rulesRequired:[function(t){return!!t||"Это обязательное поле"}],rulesTitleLength:[function(e){return e.length>=t.minTitleLength&&e.length<=t.maxTitleLength||"Допустимая длина: от "+t.minTitleLength+" до "+t.maxTitleLength+" символов"}],rulesQuestionLength:[function(e){return e.length>=t.minQuestionLength&&e.length<=t.maxQuestionLength||"Допустимая длина: от "+t.minQuestionLength+" до "+t.maxQuestionLength+" символов"}],rulesDifficulty:[function(e){return e>=t.minDifficulty&&e<=t.maxDifficulty||"Введите значение от "+t.minDifficulty+" до "+t.maxDifficulty}],rulesAttempts:[function(e){return!t.enabledAttempts||e>=t.minAttempts&&e<=t.maxAttempts||"Введите значение в диапазоне от "+t.minAttempts+" до "+t.maxAttempts}],rulesTimer:[function(e){return!t.enabledTimer||e>=t.minTimer&&e<=t.maxTimer||"Введите значение в диапазоне от "+t.minTimer+" до "+t.maxTimer}],message:"",alert:!1,successSet:!1,getQError:!1,attempts:null,timer:null,answersQty:null,questionId:"",answers:[],question:null,imageLoadText:"Изображение еще не загружено",audioLoadText:"Аудиозапись еще не загружена"}},methods:{getQuestion:function(){var t=this;l.a.get(vt+"/api/questions/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{id:this.$route.params.id}}).then(function(e){t.question=e.data[0],t.enabledAttempts=!!t.question.attempts_number,t.enabledTimer=!!t.question.timer,t.enabledAudio=!1,t.enabledImage=!1,t.answersQty=t.question.answers_number,t.question.audio&&(t.audioLoadText="Уже имеется загруженная аудиозапись"),t.question.image&&(t.imageLoadText="Уже имеется загруженное изображение"),t.question.old_image=t.question.image,t.question.old_audio=t.question.audio,t.question.image=null,t.question.audio=null,t.attempts=t.question.attempts_number,t.timer=t.question.timer,l.a.get(vt+"/api/answers/",{headers:{Authorization:d.getAuthenticationHeader(t)},params:{id:t.$route.params.id}}).then(function(e){t.answers=e.data;for(var s=0;s<t.answers.length;s++)t.answers[s].enabledAudio=!1,t.answers[s].audio?t.answers[s].audioLoadText="Уже имеется загруженная аудиозапись":t.answers[s].audioLoadText="Аудиозапись еще не загружена",t.answers[s].enabledImage=!1,t.answers[s].image?t.answers[s].imageLoadText="Уже имеется загруженное изображение":t.answers[s].imageLoadText="Изображение еще не загружено",t.answers[s].showMediaTooltip=!1,t.answers[s].old_image=t.answers[s].image,t.answers[s].old_audio=t.answers[s].audio,t.answers[s].image=null,t.answers[s].audio=null}).catch(function(e){t.alert=!0,t.message="Не удалось получить данные об ответах. Проверьте подключение к сети."})}).catch(function(e){t.alert=!0,t.message="Не удалось получить данные о вопросе. Проверьте подключение к сети."})},getUploadedQImage:function(t){this.question.image=t},getUploadedQAudio:function(t){this.question.audio=t},getUploadedAudio:function(t){this.answers[t.index].audio=t.audio,this.answers.push(null),this.answers.pop()},getUploadedImage:function(t){this.answers[t.index].image=t.image,this.answers.push(null),this.answers.pop()},changeAudio:function(t){this.answers[t].enabledAudio?this.answers[t].audioLoadText="Аудиозапись еще не загружена":(this.answers[t].audio=null,this.answers[t].old_audio?this.answers[t].audioLoadText="Уже имеется загруженная аудиозапись":this.answers[t].audioLoadText="Аудиозапись еще не загружена"),this.answers.push(null),this.answers.pop()},changeImage:function(t){this.answers[t].enabledImage?this.answers[t].imageLoadText="Изображение еще не загружено":(this.answers[t].image=null,this.answers[t].old_image?this.answers[t].imageLoadText="Уже имеется загруженное изображение":this.answers[t].imageLoadText="Изображение еще не загружено"),this.answers.push(null),this.answers.pop()},onSubmit:function(){var t=this;if(!this.$refs.editQform.validate())return this.successSet=!1,this.alert=!0,void(this.message="Не все обязательные поля были заполнены.");if(!this.successSet){var e=new FormData;e.set("text",this.question.text),e.set("title",this.question.title),e.set("attempts_number",this.attempts),e.set("timer",this.timer),e.set("answer_type",this.question.answer_type),e.set("answers_number",this.answersQty),e.set("difficulty",this.question.difficulty),this.question.old_image&&!this.enabledImage?e.set("image","stay"):this.question.old_image&&!this.question.image?e.set("image",null):e.set("image",this.question.image),this.question.old_audio&&!this.enabledAudio?e.set("audio","stay"):this.question.old_audio&&!this.question.audio?e.set("audio",null):e.set("audio",this.question.audio);var s=null;1==this.currentType&&(s=this.answers[0].comment),e.set("comment",s),l.a.patch(vt+"/api/questions/"+this.$route.params.id+"/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){t.questionId=e.data.id;for(var s=0;s<t.answers.length;++s)t.answers[s].question=t.questionId;var o=new FormData;for(s=0;s<t.answers.length;s++)t.answers[s].old_image&&!t.answers[s].enabledImage?o.set("image","stay"):t.answers[s].old_image&&!t.answers[s].image?o.set("image",null):o.set("image",t.answers[s].image),t.answers[s].old_audio&&!t.answers[s].enabledAudio?o.set("audio","stay"):t.answers[s].audio&&!t.answers[s].audio?o.set("audio",null):o.set("audio",t.answers[s].audio),2!=t.currentType?o.append("priority",t.answers[s].priority):t.answers[s].correct?o.append("priority",t.answers.length):o.append("priority",s+1),o.append("text",t.answers[s].text),o.append("correct",t.answers[s].correct),2!=t.currentType||t.answers[s].correct?o.append("weight",t.answers[s].weight):o.append("weight",0),o.append("hint",t.answers[s].hint),o.append("question",t.questionId);l.a.patch(vt+"/api/answers/"+t.$route.params.id+"/",o,{headers:{Authorization:d.getAuthenticationHeader(t)},params:{}}).then(function(e){t.successSet=!0,t.alert=!0,t.message="Вопрос успешно изменен.",setTimeout(t.goBack,1200)}).catch(function(e){t.alert=!0,t.message="Не удалось изменить вопрос. Проверьте подключение к сети."})}).catch(function(e){t.alert=!0,t.message="Не удалось изменить вопрос. Проверьте подключение к сети."})}},reloadPage:function(){window.location.reload(!0)},goBack:function(){jt.push("/tests")},deleteFile:function(t){t?this.question.audio=null:this.question.image=null},pushAnswer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){this.answers.push({image:this.answers[t].image,audio:this.answers[t].audio,text:this.answers[t].text,priority:this.answers[t].priority,correct:this.answers[t].correct,weight:this.answers[t].weight,hint:this.answers[t].hint,comment:this.answers[t].comment,question:this.$route.params.id,enabledAudio:!0,enabledImage:!0})}else{var e=1==this.currentType;this.answers.push({image:null,audio:null,text:null,priority:this.answers.length+1,correct:e,weight:256,hint:null,comment:null,question:0,enabledAudio:!1,enabledImage:!1})}}},watch:{currentType:function(t){for(1==t?this.countAnswers=1:2!=t&&3!=t||(this.countAnswers=2),this.answers.splice(0);this.answers.length<this.countAnswers;)this.pushAnswer()},enabledImage:function(t){t?this.imageLoadText="Изображение еще не загружено":(this.question.image=null,this.question.old_image?this.imageLoadText="Уже имеется загруженное изображение":this.imageLoadText="Изображение еще не загружено")},enabledAudio:function(t){t?this.audioLoadText="Аудиозапись еще не загружена":(this.question.audio=null,this.question.old_audio?this.audioLoadText="Уже имеется загруженная аудиозапись":this.audioLoadText="Аудиозапись еще не загружена")},attempts:function(t){this.enabledAttempts?this.attempts=t:this.attempts=null},timer:function(t){this.enabledTimer?this.timer=t:this.timer=null}},computed:{countAnswers:function(t){return this.answers.length}},mounted:function(){this.getQuestion();for(var t=0;t<this.answers.length;t++)this.pushAnswer(t)}},ht={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"editQform"},[s("v-container",[s("v-layout",{attrs:{row:"",wrap:""}},[s("h4",{staticClass:"display-1"},[t._v("Редактирование вопроса")]),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:"Краткое название (будет видно только вам)",required:"",clearable:"",rules:t.rulesTitleLength,box:""},model:{value:t.question.title,callback:function(e){t.$set(t.question,"title",e)},expression:"question.title"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-textarea",{attrs:{label:"Формулировка вопроса",rules:t.rulesQuestionLength,required:"",clearable:"",box:""},model:{value:t.question.text,callback:function(e){t.$set(t.question,"text",e)},expression:"question.text"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAttempts,callback:function(e){t.enabledAttempts=e},expression:"enabledAttempts"}}),t._v(" "),s("v-text-field",{attrs:{type:"number",disabled:!t.enabledAttempts,label:"Количество попыток",clearable:"",box:"",hint:"Если не указать, то закончатся, когда обнулятся баллы"},model:{value:t.attempts,callback:function(e){t.attempts=e},expression:"attempts"}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledTimer,callback:function(e){t.enabledTimer=e},expression:"enabledTimer"}}),t._v(" "),s("v-text-field",{attrs:{type:"number",disabled:!t.enabledTimer,rules:t.rulesTimer,label:"Таймер на вопрос",clearable:"",box:"",hint:"В секундах"},model:{value:t.timer,callback:function(e){t.timer=e},expression:"timer"}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Замена изображения и аудио:")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showMediaTooltip,callback:function(e){t.showMediaTooltip=e},expression:"showMediaTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showMediaTooltip=!t.showMediaTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Если вы хотите оставить изображение или аудио без изменений, убедитесь, что галочки ниже не отмечены. Если же хотите удалить их, отметьте галочку, но не загружайте новый файл. Для изменения изображения или аудио загрузите новый файл.")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledImage,callback:function(e){t.enabledImage=e},expression:"enabledImage"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"image/*",dis:!t.enabledImage,checked:t.enabledImage,label:t.imageLoadText},on:{input:function(e){t.getUploadedQImage(e)},"update:deleteFile":function(e){t.deleteFile(0)}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAudio,callback:function(e){t.enabledAudio=e},expression:"enabledAudio"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!t.enabledAudio,checked:t.enabledAudio,label:t.audioLoadText},on:{input:function(e){t.getUploadedQAudio(e)},"update:deleteFile":function(e){t.deleteFile(1)}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs10:""}},[s("v-slider",{attrs:{max:t.maxDifficulty,min:t.minDifficulty,label:"Сложность вопроса"},model:{value:t.question.difficulty,callback:function(e){t.$set(t.question,"difficulty",e)},expression:"question.difficulty"}})],1),t._v(" "),s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{attrs:{type:"number",rules:t.rulesDifficulty,box:""},model:{value:t.question.difficulty,callback:function(e){t.$set(t.question,"difficulty",e)},expression:"question.difficulty"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:t.answerTypes,"item-value":"id","item-text":"val",label:"Тип ответа",box:"",required:""},model:{value:t.question.answer_type,callback:function(e){t.$set(t.question,"answer_type",e)},expression:"question.answer_type"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("add-answers",{attrs:{currentType:t.question.answer_type,countAnswers:t.countAnswers,answers:t.answers,answersQty:t.answersQty,edit:t.edit},on:{"update:countAnswers":function(e){t.countAnswers=e},"update:answersQty":function(e){t.answersQty=e},push:function(e){t.pushAnswer()},"update:answersAudio":function(e){t.getUploadedAudio(e)},"update:answersImage":function(e){t.getUploadedImage(e)},"update:changeAudio":function(e){t.changeAudio(e)},"update:changeImage":function(e){t.changeImage(e)}}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successSet?"success":"error"}},[t._v("\n\t\t\t        "+t._s(t.message)+"\n\n\t\t\t\t    "),t.successSet?s("v-btn",{attrs:{to:"/questions",flat:""}},[t._v("Вернутьcя к вопросам")]):t._e(),t._v(" "),t.successSet?t._e():s("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("Попробовать еще раз")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:"",large:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("\n\t\t\t\t\t\t Сохранить вопрос\n\t\t\t\t\t")])],1)],1)],1)],1)},staticRenderFns:[]};var pt=s("VU/8")(mt,ht,!1,function(t){s("745u")},null,null).exports,ft=s("Xxa5"),_t=s.n(ft),gt=s("exGp"),xt=s.n(gt),wt=c,bt={components:{FileInput:V,AddedQuestion:O},data:function(){var t,e=this;return{image:"",imageLoadText:"Изображение к тесту",enabledImage:!1,questions:[],questionsChecks:[],error:!1,successSet:!1,alert:!1,message:"",checkTokenObserver:!1,showTestTooltip:!1,showTitleTooltip:!1,showSatisTooltip:!1,showGoodTooltip:!1,showPerfectTooltip:!1,showAttemptsTooltip:!1,showAuthorTooltip:!1,showQNumTooltip:!1,showLinkTooltip:!1,showDescriptionTooltip:!1,showImageTooltip:!1,title:"",token:"",attempts:"",questions_number:"",author:"",description:"",perfect_mark:75,good_mark:50,satisfactory_mark:25,max_percent:100,min_percent:0,maxAttempts:100,minAttempts:0,maxAuthorLen:70,minAuthorLen:10,minDescrLen:50,maxDescrLen:2e3,minTitleLen:8,maxTitleLen:100,minTokenLen:8,maxTokenLen:50,maxVideoLength:150,validToken:!0,audioPerfect:null,audioGood:null,audioSatisfactory:null,audioBad:null,audioLoadTextPerfect:"",audioLoadTextGood:"",audioLoadTextSatisfactory:"",audioLoadTextBad:"",enabledAudioBad:!1,enabledAudioSatisfactory:!1,enabledAudioGood:!1,enabledAudioPerfect:!1,video:"",rules:{required:function(t){return!!t||"Это необходимое поле"},percents:function(t){return t>=e.min_percent&&t<=e.max_percent||"Введите значение от "+e.min_percent+" до "+e.max_percent},perfect:function(t){return t>e.good_mark&&t>e.satisfactory_mark||'Значение должно быть выше, чем значение оценки "Хорошо"'},good:function(t){return t<e.perfect_mark&&t>e.satisfactory_mark||'Значение должно быть между значениями оценок "Отлично" и "Удовлетворительно"'},satisfactory:function(t){return t<e.good_mark&&t<e.perfect_mark||'Значение должно быть ниже, чем значение оценки "Хорошо"'},attempts:function(t){return t>=e.minAttempts&&t<=e.maxAttempts||"Введите значение в диапазоне от "+e.minAttempts+" до "+e.maxAttempts},author:function(t){return t.length>=e.minAuthorLen&&t.length<=e.maxAuthorLen||"Длина поля должна быть в диапазоне от "+e.minAuthorLen+" до "+e.maxAuthorLen+" символов"},q_number_min:function(t){return t>0||"Значение должно быть больше 0"},q_number_max:function(t){return t<=e.questionsChecks.length||"Должно быть не более, чем число вопросов, выбранных выше"},description:function(t){return t.length>=e.minDescrLen&&t.length<=e.maxDescrLen||"Длина текста должна быть в диапазоне от "+e.minDescrLen+" до "+e.maxDescrLen+" символов"},title:function(t){return t.length>=e.minTitleLen&&t.length<=e.maxTitleLen||"Длина названия должна быть в диапазоне от "+e.minTitleLen+" до "+e.maxTitleLen+" символов"},tokenValid:(t=xt()(_t.a.mark(function t(s){return _t.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTokenAnswer();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0="";case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}),token:function(t){return t.length>=e.minTokenLen&&t.length<=e.maxTokenLen||"Длина ссылки должна быть в диапазоне от "+e.minTokenLen+" до "+e.maxTokenLen+" символов"},video:function(t){return t.length<=e.maxVideoLength||"Допустимая длина не более "+e.maxVideoLength+" символов"}}}},methods:{getTokenAnswer:function(){var t=this;return xt()(_t.a.mark(function e(){var s;return _t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,e.next=3,t.checkToken().then(function(e){s=e,t.validToken="true"==s},function(t){console.log(t)});case 3:return e.abrupt("return",t.validToken);case 4:case"end":return e.stop()}},e,t)}))()},getAddedQuestions:function(){var t=this;l.a.get(wt+"/api/questionslist/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.questions=s,t.questions.reverse();for(var o=0;o<t.questions.length;++o)t.questions[o].show=!1}).catch(function(e){t.error=!0,console.log(e)})},getUploadedAudio:function(t,e){0==e?this.audioPerfect=t:1==e?this.audioGood=t:2==e?this.audioSatisfactory=t:3==e&&(this.audioBad=t)},getUploadedImage:function(t){this.image=t},goBack:function(){jt.push("/tests")},onSubmit:function(){var t=this;if(!this.$refs.addTform.validate()||!this.validToken)return this.successSet=!1,this.alert=!0,void(this.message="Не все обязательные поля были заполнены.");if(!this.successSet){var e=new FormData;e.set("name",this.title),e.set("token",this.token),e.set("attempts",this.attempts),e.set("questions_number",this.questions_number),e.set("author",this.author),e.set("description",this.description),e.set("image",this.image),e.set("perfect_mark",this.perfect_mark),e.set("good_mark",this.good_mark),e.set("satisfactory_mark",this.satisfactory_mark),e.set("perfect_audio",this.audioPerfect),e.set("good_audio",this.audioGood),e.set("satisfactory_audio",this.audioGood),e.set("bad_audio",this.audioBad),e.set("video",this.video);for(var s=0;s<this.questionsChecks.length;s++)e.append("questions",this.questionsChecks[s]);var o={};e.forEach(function(t,e){o[e]=t});var n=st()(o);console.log(n),console.log(e),l.a.post(wt+"/api/courses/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){t.successSet=!0,t.alert=!0,t.message="Тест успешно добавлен.",setTimeout(t.goBack,1200)}).catch(function(e){t.successSet=!1,t.alert=!0,t.message="Не удалось добавить тест. Проверьте подключение к сети."})}},textToTranslit:function(t){var e=[];e["а"]="a",e["б"]="b",e["в"]="v",e["г"]="g",e["д"]="d",e["е"]="e",e["ё"]="yo",e["ж"]="zh",e["з"]="z",e["и"]="i",e["й"]="j",e["к"]="k",e["л"]="l",e["м"]="m",e["н"]="n",e["о"]="o",e["п"]="p",e["р"]="r",e["с"]="s",e["т"]="t",e["у"]="u",e["ф"]="f",e["х"]="kh",e["ц"]="c",e["ч"]="ch",e["ш"]="sh",e["щ"]="shch",e["ъ"]="",e["ы"]="i",e["ь"]="",e["э"]="e",e["ю"]="yu",e["я"]="ya",e[" "]="_",e["А"]="a",e["Б"]="b",e["В"]="v",e["Г"]="g",e["Д"]="d",e["Е"]="e",e["Ё"]="yo",e["Ж"]="zh",e["З"]="z",e["И"]="i",e["Й"]="j",e["К"]="k",e["Л"]="l",e["М"]="m",e["Н"]="n",e["О"]="o",e["П"]="p",e["Р"]="r",e["С"]="s",e["Т"]="t",e["У"]="u",e["Ф"]="f",e["Х"]="kh",e["Ц"]="c",e["Ч"]="ch",e["Ш"]="sh",e["Щ"]="shch",e["Ъ"]="",e["Ы"]="i",e["Ь"]="",e["Э"]="e",e["Ю"]="yu",e["Я"]="ya",e["/"]="",e["\\"]="";for(var s="",o=0;o<t.length;o++)void 0!=e[t[o]]?s+=e[t[o]]:s+=t[o];return s},toggleShow:function(t){for(var e=0;e<this.questions.length;++e)if(this.questions[e].id==t)return this.questions[e].show=!this.questions[e].show,this.questions.push(null),void this.questions.pop()},checkToken:function(){var t=this;return xt()(_t.a.mark(function e(){var s,o;return _t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={token:t.token},e.next=3,l.a.post(wt+"/api/token-check/",s,{headers:{Authorization:d.getAuthenticationHeader(t)},params:{}}).then(function(e){return t.checkTokenObserver=!1,e.data.avaliable}).catch(function(e){return t.checkTokenObserver=!1,!1});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.getAddedQuestions()},watch:{title:function(t){this.token=this.textToTranslit(t)},satisfactory_mark:function(t){console.log("s: "+t+" g: "+this.good_mark+" p: "+this.perfect_mark)},good_mark:function(t){console.log("s: "+this.satisfactory_mark+" g: "+t+" p: "+this.perfect_mark)},perfect_mark:function(t){console.log("s: "+this.satisfactory_mark+" g: "+this.good_mark+" p: "+t)},questionsChecks:function(t){this.questions_number=t.length}}},kt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"addTform"},[s("v-container",[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("h4",{staticClass:"display-1"},[t._v("Создание нового теста")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTestTooltip,callback:function(e){t.showTestTooltip=e},expression:"showTestTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTestTooltip=!t.showTestTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Сейчас вы создаете новый тест. В него потребуется добавить из списка уже созданные вами вопросы, которые будут встречаться при прохождении в случайном порядке. ")])],1)],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Название теста")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTitleTooltip,callback:function(e){t.showTitleTooltip=e},expression:"showTitleTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showTitleTooltip=!t.showTitleTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Например, 'Концепции современного естествознания'")])],1),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.title],solo:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Ссылка на курс")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showLinkTooltip,callback:function(e){t.showLinkTooltip=e},expression:"showLinkTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showLinkTooltip=!t.showLinkTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("По введенной ссылке любой желающий сможет подписаться на тест и начать проходить его. Если вам не нравится автоматически сгенерированный вариант на основе названия курса, вы можете изменить его.")])],1),t._v(" "),s("v-text-field",{attrs:{placeholder:"your-test",required:"",prefix:"/",solo:"",hint:t.validToken?"":"Такая ссылка уже существует! Выберите другой вариант.",rules:[t.rules.tokenValid,t.rules.token],"append-icon":t.validToken?"done":"block",error:!t.validToken},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Всего отмечено: "+t._s(t.questionsChecks.length))]),t._v(" "),s("div",{staticClass:"content-wrapper"},[s("added-question",{attrs:{collection:t.questions,withchecks:1,questionsChecks:t.questionsChecks},on:{"update:questionsChecks":function(e){t.questionsChecks=e},"update:collection":function(e){t.toggleShow(e)}}}),t._v(" "),t.error?s("v-label",[t._v("Не удалось получить список вопросов. Проверьте подключение к сети.")]):t._e()],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Описание")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showDescriptionTooltip,callback:function(e){t.showDescriptionTooltip=e},expression:"showDescriptionTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showDescriptionTooltip=!t.showDescriptionTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Дайте развернутое пояснение содержимого курса. Например, какие темы отражены в вопросах, на кого он расчитан, по каким ресурсам можно подготовиться к нему и т.д.")])],1),t._v(" "),s("v-textarea",{attrs:{rules:[t.rules.required,t.rules.description],required:"",solo:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Количество вопросов")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showQNumTooltip,callback:function(e){t.showQNumTooltip=e},expression:"showQNumTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showQNumTooltip=!t.showQNumTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Данное значение отражает реальное количество вопросов, которые будут включены в тест при прохождении. Если это значение ниже, чем количество вопросов, выбранных из списка выше, то в прохождение будут случайным выбором включены не все вопросы, выбранные из списка выше.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.q_number_min,t.rules.q_number_max],required:"",solo:""},model:{value:t.questions_number,callback:function(e){t.questions_number=e},expression:"questions_number"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Автор курса")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAuthorTooltip,callback:function(e){t.showAuthorTooltip=e},expression:"showAuthorTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showAuthorTooltip=!t.showAuthorTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Например, Иванов Иван Иванович")])],1),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.author],solo:""},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Количество попыток")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAttemptsTooltip,callback:function(e){t.showAttemptsTooltip=e},expression:"showAttemptsTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showAttemptsTooltip=!t.showAttemptsTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Опциональное поле. Если оставить пустым - попытки неограниченны.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.attempts],required:"",solo:""},model:{value:t.attempts,callback:function(e){t.attempts=e},expression:"attempts"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-label",[t._v("Иллюстрация к тесту")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showImageTooltip,callback:function(e){t.showImageTooltip=e},expression:"showImageTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showImageTooltip=!t.showImageTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Желательно добавить, чтобы сделать ваш курс легко узнаваемым")])],1),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledImage,callback:function(e){t.enabledImage=e},expression:"enabledImage"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"image/*",checked:t.enabledImage,dis:!t.enabledImage,label:t.imageLoadText},on:{input:t.getUploadedImage}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("h4",{staticClass:"title",attrs:{"d-block":""}},[t._v("Оценки за курс (в процентах):")])]),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Отлично")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showPerfectTooltip,callback:function(e){t.showPerfectTooltip=e},expression:"showPerfectTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showPerfectTooltip=!t.showPerfectTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Нижний порог, с которого начинается 'Отлично'")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.percents,t.rules.perfect],solo:"",required:""},model:{value:t.perfect_mark,callback:function(e){t.perfect_mark=e},expression:"perfect_mark"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Хорошо")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showGoodTooltip,callback:function(e){t.showGoodTooltip=e},expression:"showGoodTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showGoodTooltip=!t.showGoodTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Нижний порог, с которого начинается 'Хорошо'")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.percents,t.rules.good],solo:"",required:""},model:{value:t.good_mark,callback:function(e){t.good_mark=e},expression:"good_mark"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Удовлетворительно")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showSatisTooltip,callback:function(e){t.showSatisTooltip=e},expression:"showSatisTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showSatisTooltip=!t.showSatisTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Нижний порог, с которого начинается 'Удовлетворительно'")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.percents,t.rules.satisfactory],solo:"",required:""},model:{value:t.satisfactory_mark,callback:function(e){t.satisfactory_mark=e},expression:"satisfactory_mark"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Финальная аудиозапись к результату 'Отлично'")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAudioPerfect,callback:function(e){t.enabledAudioPerfect=e},expression:"enabledAudioPerfect"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!t.enabledAudioPerfect,checked:t.enabledAudioPerfect,label:t.audioLoadTextPerfect},on:{input:function(e){t.getUploadedAudio(e,0)}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Финальная аудиозапись к результату 'Хорошо'")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAudioGood,callback:function(e){t.enabledAudioGood=e},expression:"enabledAudioGood"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!t.enabledAudioGood,checked:t.enabledAudioGood,label:t.audioLoadTextGood},on:{input:function(e){t.getUploadedAudio(e,1)}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Финальная аудиозапись к результату 'Удовлетворительно'")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAudioSatisfactory,callback:function(e){t.enabledAudioSatisfactory=e},expression:"enabledAudioSatisfactory"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!0,checked:t.enabledAudioSatisfactory,label:t.audioLoadTextSatisfactory},on:{input:function(e){t.getUploadedAudio(e,2)}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-label",[t._v("Финальная аудиозапись к результату 'Плохо'")]),t._v(" "),s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledAudioBad,callback:function(e){t.enabledAudioBad=e},expression:"enabledAudioBad"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"audio/*",dis:!t.enabledAudioBad,checked:t.enabledAudioBad,label:t.audioLoadTextBad},on:{input:function(e){t.getUploadedAudio(e,3)}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Финальное видео к тесту")]),t._v(" "),s("v-text-field",{attrs:{type:"text",rules:[t.rules.video],clearable:"",solo:""},model:{value:t.video,callback:function(e){t.video=e},expression:"video"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successSet?"success":"error"}},[t._v("\n\t\t\t        "+t._s(t.message)+"\n\n\t\t\t\t    "),t.successSet?s("v-btn",{attrs:{to:"/tests",flat:""}},[t._v("Вернутьcя к тестам")]):t._e(),t._v(" "),t.successSet?t._e():s("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("Попробовать еще раз")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:"",large:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("\n\t\t\t\t\t\t Создать тест\n\t\t\t\t\t")])],1)],1)],1)],1)},staticRenderFns:[]};var yt=s("VU/8")(bt,kt,!1,function(t){s("NrxD")},null,null).exports,Tt=c,At={components:{FileInput:V,AddedQuestion:O},data:function(){var t=this;return{imageLoadText:"Изображение еще не загружено",successSet:!1,message:"",alert:!1,enabledImage:!1,questions:[],questionsChecks:[],questions_number:null,error:!1,test:[],rules:{required:function(t){return!!t||"Это необходимое поле"},percents:function(e){return e>=t.min_percent&&e<=t.max_percent||"Введите значение от "+t.min_percent+" до "+t.max_percent},attempts:function(e){return e>=t.minAttempts&&e<=t.maxAttempts||"Введите значение в диапазоне от "+t.minAttempts+" до "+t.maxAttempts},author:function(e){return e.length>=t.minAuthorLen&&e.length<=t.maxAuthorLen||"Длина поля должна быть в диапазоне от "+t.minAuthorLen+" до "+t.maxAuthorLen+" символов"},q_number_min:function(t){return t>0||"Значение должно быть больше 0"},q_number_max:function(e){return e<=t.questionsChecks.length||"Должно быть не более, чем число вопросов, выбранных выше"},description:function(e){return e.length>=t.minDescrLen&&e.length<=t.maxDescrLen||"Длина текста должна быть в диапазоне от "+t.minDescrLen+" до "+t.maxDescrLen+" символов"},title:function(e){return e.length>=t.minTitleLen&&e.length<=t.maxTitleLen||"Длина названия должна быть в диапазоне от "+t.minTitleLen+" до "+t.maxTitleLen+" символов"}},showTestTooltip:!1,showTitleTooltip:!1,showSatisTooltip:!1,showGoodTooltip:!1,showPerfectTooltip:!1,showAttemptsTooltip:!1,showAuthorTooltip:!1,showQNumTooltip:!1,showLinkTooltip:!1,showDescriptionTooltip:!1,showMediaTooltip:!1,max_percent:100,min_percent:0,maxAttempts:100,minAttempts:0,maxAuthorLen:70,minAuthorLen:10,minDescrLen:50,maxDescrLen:2e3,minTitleLen:8,maxTitleLen:100}},methods:{getQuestionsList:function(){var t=this;l.a.get(Tt+"/api/questionslist/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){var s=e.data;t.questions=s,t.questions.reverse()}).catch(function(e){t.error=!0,t.message="Не удалось получить список вопросов",console.log(e)})},getTestData:function(){var t=this;l.a.get(Tt+"/api/courses/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{token:this.$route.params.token}}).then(function(e){var s=e.data;t.test=s[0],t.questionsChecks=t.test.questions,t.test.image&&(t.imageLoadText="Уже имеется загруженное изображение"),t.test.old_image=t.test.image,t.test.image=null,t.getQuestionsList()}).catch(function(e){t.error=!0,t.message="Не удалось получить данные о тесте",console.log(e)})},onSubmit:function(){var t=this;if(!this.$refs.editTform.validate())return this.successSet=!1,this.alert=!0,void(this.message="Не все обязательные поля были заполнены.");if(!this.successSet){var e=new FormData;e.set("name",this.test.name),e.set("attempts",this.test.attempts),e.set("questions_number",this.test.questions_number),e.set("author",this.test.author),e.set("description",this.test.description),this.test.old_image&&!this.enabledImage?e.set("image","stay"):this.test.old_image&&!this.test.image?e.set("image",null):e.set("image",this.test.image),e.set("perfect_mark",this.test.perfect_mark),e.set("good_mark",this.test.good_mark),e.set("satisfactory_mark",this.test.satisfactory_mark);for(var s=0;s<this.questionsChecks.length;s++)e.append("questions",this.questionsChecks[s]);l.a.patch(Tt+"/api/courses/"+this.$route.params.token,e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){t.successSet=!0,t.alert=!0,t.message="Тест успешно добавлен.",setTimeout(t.goBack,1200)}).catch(function(e){t.successSet=!1,t.alert=!0,t.message="Не удалось добавить тест. Проверьте подключение к сети."})}},getUploadedImage:function(t){this.test.image=t},toggleShow:function(t){for(var e=0;e<this.questions.length;++e)if(this.questions[e].id==t)return this.questions[e].show=!this.questions[e].show,this.questions.push(null),void this.questions.pop()},goBack:function(){jt.push("/tests")},deleteImage:function(){this.test.image=null}},watch:{satisfactory_mark:function(t){console.log("s: "+t+" g: "+this.test.good_mark+" p: "+this.test.perfect_mark)},good_mark:function(t){console.log("s: "+this.test.satisfactory_mark+" g: "+t+" p: "+this.test.perfect_mark)},perfect_mark:function(t){console.log("s: "+this.test.satisfactory_mark+" g: "+this.test.good_mark+" p: "+t)},questionsChecks:function(t){this.questions_number=t.length},enabledImage:function(t){t?this.imageLoadText="Изображение еще не загружено":(this.test.image=null,this.test.old_image?this.imageLoadText="Уже имеется загруженное изображение":this.imageLoadText="Изображение еще не загружено")}},mounted:function(){this.getTestData()}},qt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"editTform"},[s("v-container",[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("h4",{staticClass:"display-1"},[t._v("Редактирование теста")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTestTooltip,callback:function(e){t.showTestTooltip=e},expression:"showTestTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showTestTooltip=!t.showTestTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Сейчас вы создаете новый тест. В него потребуется добавить из списка уже созданные вами вопросы, которые будут встречаться при прохождении в случайном порядке. ")])],1)],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Название теста")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showTitleTooltip,callback:function(e){t.showTitleTooltip=e},expression:"showTitleTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showTitleTooltip=!t.showTitleTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Например, 'Концепции современного естествознания'")])],1),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.title],solo:""},model:{value:t.test.name,callback:function(e){t.$set(t.test,"name",e)},expression:"test.name"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Всего отмечено: "+t._s(t.questionsChecks.length))]),t._v(" "),s("div",{staticClass:"content-wrapper"},[s("added-question",{attrs:{collection:t.questions,withchecks:1,questionsChecks:t.questionsChecks},on:{"update:questionsChecks":function(e){t.questionsChecks=e},"update:collection":function(e){t.toggleShow(e)}}}),t._v(" "),t.error?s("v-label",[t._v("Не удалось получить список вопросов. Проверьте подключение к сети.")]):t._e()],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Описание")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showDescriptionTooltip,callback:function(e){t.showDescriptionTooltip=e},expression:"showDescriptionTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showDescriptionTooltip=!t.showDescriptionTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Дайте развернутое пояснение содержимого курса. Например, какие темы отражены в вопросах, на кого он расчитан, по каким ресурсам можно подготовиться к нему и т.д.")])],1),t._v(" "),s("v-textarea",{attrs:{rules:[t.rules.required,t.rules.description],required:"",solo:""},model:{value:t.test.description,callback:function(e){t.$set(t.test,"description",e)},expression:"test.description"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Количество вопросов")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showQNumTooltip,callback:function(e){t.showQNumTooltip=e},expression:"showQNumTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showQNumTooltip=!t.showQNumTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Данное значение отражает реальное количество вопросов, которые будут включены в тест при прохождении. Если это значение ниже, чем количество вопросов, выбранных из списка выше, то в прохождение будут случайным выбором включены не все вопросы, выбранные из списка выше.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.q_number_min,t.rules.q_number_max],required:"",solo:""},model:{value:t.test.questions_number,callback:function(e){t.$set(t.test,"questions_number",e)},expression:"test.questions_number"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Автор курса")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAuthorTooltip,callback:function(e){t.showAuthorTooltip=e},expression:"showAuthorTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showAuthorTooltip=!t.showAuthorTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Например, Иванов Иван Иванович")])],1),t._v(" "),s("v-text-field",{attrs:{required:"",rules:[t.rules.required,t.rules.author],solo:""},model:{value:t.test.author,callback:function(e){t.$set(t.test,"author",e)},expression:"test.author"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Количество попыток")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showAttemptsTooltip,callback:function(e){t.showAttemptsTooltip=e},expression:"showAttemptsTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showAttemptsTooltip=!t.showAttemptsTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Опциональное поле. Если оставить пустым - попытки неограниченны.")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.attempts],required:"",solo:""},model:{value:t.test.attempts,callback:function(e){t.$set(t.test,"attempts",e)},expression:"test.attempts"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-label",[t._v("Замена изображения и аудио:")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showMediaTooltip,callback:function(e){t.showMediaTooltip=e},expression:"showMediaTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},on:{click:function(e){t.showMediaTooltip=!t.showMediaTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Если вы хотите оставить изображение или аудио без изменений, убедитесь, что галочки ниже не отмечены. Если же хотите удалить их, отметьте галочку, но не загружайте новый файл. Для изменения изображения или аудио загрузите новый файл.")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",xl3:""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:t.enabledImage,callback:function(e){t.enabledImage=e},expression:"enabledImage"}}),t._v(" "),s("file-input",{ref:"fileInput",staticClass:"fileBtn",attrs:{accept:"image/*",checked:t.enabledImage,dis:!t.enabledImage,label:t.imageLoadText},on:{input:t.getUploadedImage,"update:deleteFile":function(e){t.deleteImage()}}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("h4",{staticClass:"title",staticStyle:{"padding-top":"15px"},attrs:{"d-block":""}},[t._v("Оценки за курс (в процентах):")])]),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Отлично")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showPerfectTooltip,callback:function(e){t.showPerfectTooltip=e},expression:"showPerfectTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showPerfectTooltip=!t.showPerfectTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Нижний порог, с которого начинается 'Отлично'")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.percents,t.rules.perfect],solo:"",required:""},model:{value:t.test.perfect_mark,callback:function(e){t.$set(t.test,"perfect_mark",e)},expression:"test.perfect_mark"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Хорошо")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showGoodTooltip,callback:function(e){t.showGoodTooltip=e},expression:"showGoodTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showGoodTooltip=!t.showGoodTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Нижний порог, с которого начинается 'Хорошо'")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.percents,t.rules.good],solo:"",required:""},model:{value:t.test.good_mark,callback:function(e){t.$set(t.test,"good_mark",e)},expression:"test.good_mark"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[s("v-label",[t._v("Удовлетворительно")]),t._v(" "),s("v-tooltip",{attrs:{bottom:""},model:{value:t.showSatisTooltip,callback:function(e){t.showSatisTooltip=e},expression:"showSatisTooltip"}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:""},nativeOn:{click:function(e){t.showSatisTooltip=!t.showSatisTooltip}},slot:"activator"},[s("v-icon",{attrs:{color:"light-blue darken-1"}},[t._v("info")])],1),t._v(" "),s("span",[t._v("Нижний порог, с которого начинается 'Удовлетворительно'")])],1),t._v(" "),s("v-text-field",{attrs:{type:"number",rules:[t.rules.percents,t.rules.satisfactory],solo:"",required:""},model:{value:t.test.satisfactory_mark,callback:function(e){t.$set(t.test,"satisfactory_mark",e)},expression:"test.satisfactory_mark"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successSet?"success":"error"}},[t._v("\n\t\t\t        "+t._s(t.message)+"\n\n\t\t\t\t    "),t.successSet?s("v-btn",{attrs:{to:"/tests",flat:""}},[t._v("Вернутьcя к тестам")]):t._e(),t._v(" "),t.successSet?t._e():s("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("Попробовать еще раз")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:"",large:""},nativeOn:{click:function(e){t.onSubmit()}}},[t._v("\n\t\t\t\t\t\t Создать тест\n\t\t\t\t\t")])],1)],1)],1)],1)},staticRenderFns:[]};var Lt=s("VU/8")(At,qt,!1,function(t){s("M6MZ")},null,null).exports,Ct=c,Ot={data:function(){return{alert_message:"",alert:!1,successReq:!1,response:[],emptyPic:s("ne0W"),modes:[],currentVariant:{id:null,name:null},modeVariants:[],openModes:!1,successLoaded:!1}},methods:{getTestData:function(){var t=this;l.a.get(Ct+"/api/courses/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{token:this.$route.params.token}}).then(function(e){var s=e.data;t.response=s[0],console.log("1"),l.a.get(Ct+"/api/strict_modes/?token="+t.$route.params.token,{headers:{Authorization:d.getAuthenticationHeader(t)},params:{}}).then(function(e){var s=e.data;t.modes=s,console.log(t.modes),t.successLoaded=!0,t.response.mode||(t.openModes=!0),t.successReq=!0;for(var o=0;o<t.modes.length;o++)t.modeVariants.push({id:t.modes[o].id,name:t.modes[o].name});t.currentVariant=t.modeVariants[0],console.log(t.currentVariant)}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить список режимов. Проверьте подключение к сети."})}).catch(function(e){t.alert=!0,t.alert_message="Не удалось получить данные теста.",t.successReq=!1})},subscribe:function(){var t=this,e={token:this.$route.params.token};l.a.post(Ct+"/api/course-subsc/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){e.data;t.alert=!0,t.alert_message="Вы успешно подписались!",t.infoReq=!1,t.successReq=!0,t.response.subscribed=!0}).catch(function(e){t.alert=!0,t.infoReq=!1,t.alert_message="Не удалось подписаться.",t.successReq=!1,console.log(e)})},unsubscribe:function(){var t=this,e={token:this.$route.params.token};l.a.post(Ct+"/api/course-subsc/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){e.data;t.alert=!0,t.alert_message="Вы отписались от теста.",t.infoReq=!0,t.successReq=!1,t.response.subscribed=!1}).catch(function(e){t.alert=!0,t.alert_message="Не удалось отписаться.",t.infoReq=!1,t.successReq=!1,console.log(e)})},reloadPage:function(){window.location.reload(!0)},hideAlert:function(){this.alert=!1},startTimer:function(){setTimeout(this.hideAlert,4e3)}},mounted:function(){this.getTestData()},watch:{alert:function(t){t&&this.startTimer()},currentVariant:function(t){console.log(t)}}},$t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm3:"",md2:""}},[s("v-btn",{attrs:{color:"primary",to:"/",dark:"",flat:"",large:""}},[s("v-icon",{staticClass:"mr-1"},[t._v("\n\t\t\t\t\t\tkeyboard_backspace\n\t\t\t\t\t")]),t._v("\n\t\t\t\t\t Вернуться\n\t\t\t\t")],1)],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"title text-md-center"},[t._v(" "+t._s(t.response.name))])]),t._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"px-4 py-4",attrs:{xs12:"",sm4:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-img",{staticClass:"mb-3",attrs:{"aspect-ratio":16/9,src:t.response.image?t.response.image:t.emptyPic,position:"center center"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:t.alert,type:t.successReq?"success":"error",transition:"scale-transition",outline:""}},[t._v("\n\t\t\t\t\t        "+t._s(t.alert_message)+"\n\n\t\t\t\t\t      \t"),t.successReq?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",dark:""},nativeOn:{click:function(e){t.reloadPage()}},slot:"activator"},[s("v-icon",[t._v("autorenew")])],1),t._v(" "),s("span",[t._v("Обновить")])],1)],1)],1),t._v(" "),t.openModes?s("v-select",{attrs:{items:t.modeVariants,"item-text":"name","item-value":"id",label:"Выбор режима","return-object":"",solo:"",required:""},model:{value:t.currentVariant,callback:function(e){t.currentVariant=e},expression:"currentVariant"}}):t._e(),t._v(" "),t.response.subscribed?s("v-btn",{attrs:{round:"",disabled:!t.successLoaded,color:"primary",to:{name:"testing",params:{token:t.$route.params.token,mode:t.currentVariant.id}},dark:"",block:"",large:""}},[t._v("\n\t\t\t\t\t\t Пройти тест\n\t\t\t\t\t")]):t._e(),t._v(" "),t.response.subscribed?s("v-btn",{attrs:{round:"",color:"error",dark:"",block:"",large:""},nativeOn:{click:function(e){t.unsubscribe()}}},[t._v("\n\t\t\t\t\t\t Отписаться\n\t\t\t\t\t")]):s("v-btn",{attrs:{round:"",color:"success",dark:"",block:"",large:""},nativeOn:{click:function(e){t.subscribe()}}},[t._v("\n\t\t\t\t\t\t Подписаться\n\t\t\t\t\t")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm8:""}},[s("v-flex",{attrs:{xs12:""}},[s("p",[s("strong",[t._v("Автор:")]),t._v(" "+t._s(t.response.author))])]),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("p",[t.response.subscribed?s("span",[s("strong",[t._v("Использованные попытки:")]),t._v(" "+t._s(t.response.current_attempt)+" "),t.response.attempts?s("span",[t._v("/")]):t._e(),t._v(" "+t._s(t.response.attempts))]):s("span",[t._v("Не подписан на тест")])])]),t._v(" "),s("v-flex",{staticClass:"wrapText",attrs:{xs12:""}},[s("p",[t._v(t._s(t.response.description)+"\n\t\t\t\t")])])],1)],1)],1)},staticRenderFns:[]};var St=s("VU/8")(Ot,$t,!1,function(t){s("ykl7")},null,null).exports,Pt=c,It={components:{VueAudio:W.a},data:function(){return{question:[],resAnswers:[],reqAnswers:[],fullAnswer:null,alert:!1,changedChecks:[]}},methods:{getQuestion:function(t,e){var s=this;console.log("getQuestion function: ");var o={token:this.$route.params.token,mode:this.$route.params.mode};console.log(o),l.a.post(Pt+"/api/session/",o,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(o){console.log("getQuestion function 2: "),l.a.get(Pt+"/api/session-q/",{headers:{Authorization:d.getAuthenticationHeader(s)},params:{token:s.$route.params.token}}).then(function(o){console.log("getQuestion function 3: "),o.data[0]||jt.push("/tests/"+s.$route.params.token+"/result"),s.question=o.data[0],console.log("qid: "+s.question.id),s.question.media.video&&(s.question.media.video+="?autoplay=1"),s.question.video_hint&&(s.question.video_hint+="?autoplay=1"),s.question.audio_hint&&-1!=s.question.audio_hint.search("null")&&(s.question.audio_hint=null),s.question.media.audio&&-1!=s.question.media.audio.search("null")?s.question.media.audio=null:s.question.media.audio=Pt+s.question.media.audio,console.log(s.question.media.audio),l.a.get(Pt+"/api/session-a/",{headers:{Authorization:d.getAuthenticationHeader(s)},params:{id:s.question.id}}).then(function(o){if(s.resAnswers.splice(0),s.reqAnswers.splice(0),s.resAnswers=o.data,console.log(s.resAnswers),console.log("setting to default"),console.log(s.reqAnswers),1!=s.question.question.answer_type)for(var n=0;n<s.resAnswers.length;++n)s.reqAnswers.push({id:s.resAnswers[n].id,chosen:!1});s.question.id==t?e(!1):e(!0)}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})}).catch(function(t){jt.push("/tests/"+s.$route.params.token+"/end"),console.log(t)})},changeCheck:function(t){for(var e=0;e<this.reqAnswers.length;++e)this.reqAnswers[e].id==t&&(this.reqAnswers[e].chosen=!this.reqAnswers[e].chosen)},changeRadio:function(t){for(var e=0;e<this.reqAnswers.length;++e)this.reqAnswers[e].id==t?this.reqAnswers[e].chosen=!0:this.reqAnswers[e].chosen=!1},setAnswer:function(){var t=this,e={id:this.question.id,status:1,answers:this.reqAnswers};console.log(e),l.a.post(Pt+"/api/session-a/",e,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(e){e.data;var s=[];console.log("req_ans: "),console.log(t.reqAnswers),console.log(t.resAnswers);for(var o=0;o<t.reqAnswers.length;++o)s.push(t.reqAnswers[o]),console.log(t.reqAnswers[o]),console.log(s[o]);console.log("arr: ");for(o=0;o<s.length;o++)console.log(s[o]);console.log(s),t.getQuestion(t.question.id,function(e){if(console.log("after getQ:"),console.log(t.reqAnswers),e)t.changedChecks=[];else for(var o=0;o<s.length;o++)t.reqAnswers[o]=s[o],t.reqAnswers[o].chosen&&t.changedChecks.push(t.reqAnswers[o].id),console.log(t.reqAnswers[o]);console.log(t.reqAnswers)})}).catch(function(t){console.log(t)})},skipAnswer:function(){var t={id:this.question.id,status:2};l.a.post(Pt+"/api/session-a/",t,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(t){t.data;window.location.reload(!0)}).catch(function(t){window.location.reload(!0)})},stopTest:function(){var t={id:this.question.id,status:3};l.a.post(Pt+"/api/session-a/",t,{headers:{Authorization:d.getAuthenticationHeader(this)},params:{}}).then(function(t){t.data;window.location.reload(!0)}).catch(function(t){window.location.reload(!0)})}},mounted:function(){this.getQuestion(function(){})},watch:{fullAnswer:function(t){this.reqAnswers.splice(0),this.reqAnswers.push(this.fullAnswer),console.log("full ans:"),console.log(this.reqAnswers)}}},Mt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"title text-md-center"},[t._v("Вопрос "+t._s(t.question.order_number)+".")])]),t._v(" "),t.question.media.video?s("v-layout",{attrs:{row:"","justify-space-around":""}},[s("iframe",{attrs:{width:"720",height:"406",src:t.question.media.video,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):t._e(),t._v(" "),t.question.question.image?s("v-layout",{staticClass:"my-3",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-img",{staticClass:"mb-3",attrs:{"aspect-ratio":16/9,src:t.question.question.image,position:"center center"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"font-weight-regular subheading"},[t._v(t._s(t.question.question.text))])])],1):s("v-flex",{staticClass:"my-3",attrs:{xs12:""}},[s("p",{staticClass:"font-weight-regular subheading"},[t._v(t._s(t.question.question.text))])]),t._v(" "),t.question.media.audio&&!t.question.media.video?s("v-flex",{staticClass:"mb-4",attrs:{xs12:""}},[s("vue-audio",{attrs:{file:t.question.media.audio,autoPlay:!t.question.audio_hint}})],1):t._e(),t._v(" "),1==t.question.question.answer_type?s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:"Ответ",required:"",clearable:"",box:""},model:{value:t.fullAnswer,callback:function(e){t.fullAnswer=e},expression:"fullAnswer"}})],1):2==t.question.question.answer_type?s("v-flex",{attrs:{xs12:""}},[s("v-radio-group",[s("v-layout",{attrs:{wrap:"",col:""}},t._l(t.resAnswers,function(e){return e.answer.image?s("v-flex",{attrs:{xs12:"",sm6:"",md4:"","px-1":""}},[s("v-img",{attrs:{src:e.answer.image,"aspect-ratio":16/9,position:"center center"}}),t._v(" "),s("p",{staticClass:"testingRadioLabel"},[s("v-label",[t._v(t._s(e.answer.text))])],1),t._v(" "),s("v-radio",{staticClass:"testingRadio",attrs:{value:e.id},on:{change:function(s){t.changeRadio(e.id)}}})],1):s("v-flex",{attrs:{xs12:""}},[s("v-radio",{attrs:{label:e.answer.text,value:e.id},on:{change:function(s){t.changeRadio(e.id)}}})],1)}))],1)],1):3==t.question.question.answer_type?s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{wrap:"",col:""}},t._l(t.resAnswers,function(e){return e.answer.image?s("v-flex",{attrs:{xs12:"",sm6:"",md4:"","px-1":""}},[s("v-img",{attrs:{src:e.answer.image,"aspect-ratio":16/9,position:"center center"}}),t._v(" "),s("p",{staticClass:"testingRadioLabel"},[s("v-label",[t._v(t._s(e.answer.text))])],1),t._v(" "),s("v-checkbox",{staticClass:"testingRadio",attrs:{value:e.id},on:{change:function(s){t.changeCheck(e.id)}},model:{value:t.changedChecks,callback:function(e){t.changedChecks=e},expression:"changedChecks"}})],1):s("v-flex",{attrs:{xs12:""}},[s("v-checkbox",{attrs:{label:e.answer.text,value:e.id},on:{change:function(s){t.changeCheck(e.id)}},model:{value:t.changedChecks,callback:function(e){t.changedChecks=e},expression:"changedChecks"}})],1)}))],1):t._e(),t._v(" "),t.question.hint||t.question.audio_hint||t.question.video_hint?s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"title"},[t._v("Комментарий к вашему ответу:")])]):t._e(),t._v(" "),t.question.video_hint?s("v-layout",{attrs:{row:"","justify-space-around":""}},[s("iframe",{attrs:{width:"720",height:"406",src:t.question.video_hint,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):t._e(),t._v(" "),t.question.audio_hint&&!t.question.video_hint?s("v-flex",{staticClass:"mb-4",attrs:{xs12:""}},[s("vue-audio",{attrs:{file:t.question.audio_hint,autoPlay:!!t.question.audio_hint}})],1):t._e(),t._v(" "),t.question.hint?s("v-flex",{attrs:{xs12:""}},[s("v-alert",{attrs:{value:!0,type:"warning"}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:t.question.mode_image,"aspect-ratio":1,width:"100",position:"center center"}})],1),t._v(" "),s("v-flex",{staticClass:"title",attrs:{xs9:""}},[t._v("\r\n\t\t\t        "+t._s(t.question.hint)+"\r\n\t\t\t    ")])],1)],1)],1):t._e(),t._v(" "),s("v-layout",{attrs:{row:"","justify-space-around":""}},[s("v-flex",{staticClass:"px-3",attrs:{xs12:"",sm6:""}},[s("v-btn",{attrs:{round:"",color:"success",dark:"",block:"",large:""},nativeOn:{click:function(e){t.setAnswer()}}},[t._v("\r\n\t\t\t\t Ответить\r\n\t\t\t")])],1),t._v(" "),s("v-flex",{staticClass:"px-3",attrs:{xs12:"",sm3:""}},[s("v-btn",{attrs:{round:"",color:"primary",dark:"",block:"",large:""},nativeOn:{click:function(e){t.skipAnswer()}}},[t._v("\r\n\t\t\t\t Пропустить\r\n\t\t\t")])],1),t._v(" "),s("v-flex",{staticClass:"px-3",attrs:{xs12:"",sm3:""}},[s("v-btn",{attrs:{round:"",color:"error",dark:"",block:"",large:""},nativeOn:{click:function(e){t.stopTest()}}},[t._v("\r\n\t\t\t\t Прервать тест\r\n\t\t\t")])],1)],1)],1)},staticRenderFns:[]};var Ut=s("VU/8")(It,Mt,!1,function(t){s("DeUA")},null,null).exports,Vt=c,Dt={components:{VueAudio:W.a},data:function(){return{headers:[{text:"Вопрос",align:"left",sortable:!1,value:"number"},{text:"Набранный балл",value:"score",align:"center",sortable:!1},{text:"Максимум",value:"max",sortable:!1,align:"center"}],response:[],q_items:[],mark:0,audio:null}},methods:{getResult:function(){var t=this;l.a.get(Vt+"/api/stats-session/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{token:this.$route.params.token}}).then(function(e){console.log(e),t.response=e.data[0],t.q_items=t.response.session_q,t.response.video&&(t.response.video+="?autoplay=1"),t.q_items.push({order_number:"Всего",result:0,weight_sum:0}),t.q_items[t.q_items.length-1].result=t.getSumScore(),t.q_items[t.q_items.length-1].weight_sum=t.getSumMax(),t.getPercent()>=t.response.perfect_mark?(t.mark=5,t.audio=t.response.perfect_audio):t.getPercent()>=t.response.good_mark?(t.mark=4,t.audio=t.response.good_audio):t.getPercent()>=t.response.satisfactory_mark?(t.mark=3,t.audio=t.response.satisfactory_audio):(t.mark=2,t.audio=t.response.bad_audio)}).catch(function(t){console.log(t)})},getSumScore:function(){for(var t=0,e=0;e<this.q_items.length-1;++e)t+=this.q_items[e].result;return t},getSumMax:function(){for(var t=0,e=0;e<this.q_items.length-1;++e)t+=this.q_items[e].weight_sum;return t},getPercent:function(){return this.getSumScore()/this.getSumMax()*100}},mounted:function(){this.getResult()}},Qt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"title text-md-center"},[t._v("Результаты")])]),t._v(" "),t.response.video?s("v-layout",{attrs:{row:"","justify-space-around":""}},[s("iframe",{attrs:{width:"720",height:"406",src:t.response.video,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):t._e(),t._v(" "),t.response.video?t._e():s("v-layout",{attrs:{row:"","justify-space-around":""}},[s("v-flex",{staticClass:"mb-4",attrs:{xs12:""}},[s("vue-audio",{attrs:{file:t.audio,autoPlay:!0}})],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.q_items},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.order_number))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.result))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.weight_sum))])]}}])},[5==t.mark?s("template",{slot:"footer"},[s("td",{staticClass:"light-green accent-4",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Отлично")])])]):4==t.mark?s("template",{slot:"footer"},[s("td",{staticClass:"yellow lighten-1",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Хорошо")])])]):3==t.mark?s("template",{slot:"footer"},[s("td",{staticClass:"orange lighten-1",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Удовлетворительно")])])]):s("template",{slot:"footer"},[s("td",{staticClass:"red lighten-1",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Неудовлетворительно")])])])],2)],1),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-btn",{attrs:{round:"",color:"primary",to:"/",dark:"",block:"",large:""}},[t._v("\n\t\t\t На главную\n\t\t")])],1)],1)},staticRenderFns:[]};var zt=s("VU/8")(Dt,Qt,!1,function(t){s("pUsm")},null,null).exports,Rt=c,Ft={data:function(){return{headers:[{text:"Вопрос",align:"left",sortable:!1,value:"number"},{text:"Набранный балл",value:"score",align:"center",sortable:!1},{text:"Максимум",value:"max",sortable:!1,align:"center"}],response:[],q_items:[]}},methods:{getResult:function(){var t=this;l.a.get(Rt+"/api/stats-session/",{headers:{Authorization:d.getAuthenticationHeader(this)},params:{token:this.$route.params.token}}).then(function(e){console.log(e),t.response=e.data[0],t.q_items=t.response.session_q,t.q_items.push({order_number:"Всего",result:0,weight_sum:0}),t.q_items[t.q_items.length-1].result=t.getSumScore(),t.q_items[t.q_items.length-1].weight_sum=t.getSumMax()}).catch(function(t){console.log(t)})},getSumScore:function(){for(var t=0,e=0;e<this.q_items.length-1;++e)t+=this.q_items[e].result;return t},getSumMax:function(){for(var t=0,e=0;e<this.q_items.length-1;++e)t+=this.q_items[e].weight_sum;return t},getPercent:function(){return this.getSumScore()/this.getSumMax()*100}},mounted:function(){this.getResult()}},Ht={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("p",{staticClass:"title text-md-center"},[t._v("К сожалению, у вас закончились попытки!")]),t._v(" "),s("p",{staticClass:"text-md-center"},[t._v("Результаты последней попытки: ")])]),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.q_items},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.order_number))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.result))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.weight_sum))])]}}])},[t.getPercent()>=t.response.perfect_mark?s("template",{slot:"footer"},[s("td",{staticClass:"light-green accent-4",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Отлично")])])]):t.getPercent()>=t.response.good_mark?s("template",{slot:"footer"},[s("td",{staticClass:"yellow lighten-1",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Хорошо")])])]):t.getPercent()>=t.response.satisfactory_mark?s("template",{slot:"footer"},[s("td",{staticClass:"orange lighten-1",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Удовлетворительно")])])]):s("template",{slot:"footer"},[s("td",{staticClass:"red lighten-1",attrs:{colspan:"100%"}},[s("strong",[t._v("Оценка: ")]),t._v(" "),s("span",[t._v("Неудовлетворительно")])])])],2)],1),t._v(" "),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-btn",{attrs:{round:"",color:"primary",to:"/",dark:"",block:"",large:""}},[t._v("\n\t\t\t На главную\n\t\t")])],1)],1)},staticRenderFns:[]};var Bt=s("VU/8")(Ft,Ht,!1,function(t){s("878P")},null,null).exports;o.default.component("added-question",O),o.default.use(i.a);var Wt=new i.a({mode:"history",routes:[{path:"/",name:"Main",component:h,children:[{path:"",component:A},{path:"addedtests",component:A},{path:"questions",component:I},{path:"add/question",component:dt},{path:"edit/question/:id",component:pt,name:"editquestion"},{path:"tests",component:B},{path:"tests/:token",component:St,name:"testpage"},{path:"tests/:token/testing",component:Ut,name:"testing"},{path:"tests/:token/result",component:zt,name:"result"},{path:"tests/:token/end",component:Bt,name:"end"},{path:"add/test",component:yt},{path:"edit/test/:token",component:Lt,name:"edittest"},{path:"stats",component:K},{path:"profile",component:tt},{path:"guide",component:Z}]},{path:"/login",name:"Authentication",component:_}]});Wt.beforeEach(function(t,e,s){"/login"!==t.path?d.user.authenticated?s():Wt.push("/login"):s()});var jt=Wt,Et=s("9h3m"),Nt=s.n(Et),Gt=s("K/Lq"),Kt=s.n(Gt),Zt=s("3EgV"),Jt=s.n(Zt);s.e(0).then(s.bind(null,"7zck")),o.default.use(Kt.a),o.default.use(Jt.a),o.default.use(Nt.a),o.default.config.productionTip=!1,d.checkAuthentication(),new o.default({el:"#app",router:jt,render:function(t){return t(a)}})},NrxD:function(t,e){},ORKW:function(t,e){},"RUc+":function(t,e,s){"use strict";var o=s("OVWC"),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.classes+"-wrapper"},[s("div",{class:t.classes+"__player"},[s("a",{staticClass:"icon-stop2",attrs:{title:"Stop"},on:{click:function(e){t.stop()}}}),t._v(" "),s("a",{class:[t.paused?"icon-play3":"icon-pause2"],attrs:{title:"Play"},on:{click:function(e){t.pause()}}}),t._v(" "),s("div",{class:t.classes+"__playback-time-wrapper",attrs:{title:"Time played : Total time"},on:{click:t.setPosition}},[s("div",{class:t.classes+"__playback-time-indicator",style:t.progressStyle}),t._v(" "),s("span",{class:t.classes+"__playback-time-current"},[t._v(t._s(t.currentTime))]),t._v(" "),s("span",{class:t.classes+"__playback-time-separator"}),t._v(" "),s("span",{class:t.classes+"__playback-time-total"},[t._v(t._s(t.duration))])]),t._v(" "),s("div",{class:t.classes+"__extern-wrapper"},[s("a",{staticClass:"icon-download",on:{click:function(e){t.download()}}}),t._v(" "),s("a",{class:[t.innerLoop?"icon-spinner10":"icon-spinner11"],on:{click:function(e){t.changeLoop()}}}),t._v(" "),s("a",{class:[t.isMuted?"icon-volume-mute2":"icon-volume-high"],attrs:{title:"Mute"},on:{click:function(e){t.mute()}}}),t._v(" "),s("a",{staticClass:"volume-toggle icon-paragraph-justify",attrs:{title:"Volume"},on:{mouseover:function(e){t.toggleVolume()}}},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.volumeValue,expression:"volumeValue",modifiers:{lazy:!0}},{name:"show",rawName:"v-show",value:t.hideVolumeSlider,expression:"hideVolumeSlider"}],staticClass:"volume-slider",attrs:{orient:"vertical",type:"range",min:"0",max:"100"},domProps:{value:t.volumeValue},on:{change:[function(e){t.volumeValue=e.target.value},function(e){t.updateVolume()}]}})])])]),t._v(" "),s("audio",{ref:"audiofile",staticStyle:{display:"none"},attrs:{id:t.playerId,loop:t.innerLoop,src:t.file,preload:"auto"}})])},staticRenderFns:[]};s.d(e,!1,function(){}),s.d(e,!1,function(){}),s.d(e,!1,function(){}),s.d(e,!1,function(){});var a=function(t){s("AOl7")},i=s("VU/8")(o.a,n,!1,a,"data-v-3da226cc",null);e.a=i.exports},Xvs9:function(t,e){},ZVPb:function(t,e){},Zsrf:function(t,e,s){"use strict";function o(t){return null===t||void 0===t}function n(t){return null!==t&&void 0!==t}function a(t,e){return e.tag===t.tag&&e.key===t.key}function i(t){var e=t.tag;t.vm=new e({data:t.args})}function r(t,e,s){var o,a,i={};for(o=e;o<=s;++o)n(a=t[o].key)&&(i[a]=o);return i}function l(t,e,s){for(;e<=s;++e)i(t[e])}function c(t,e,s){for(;e<=s;++e){var o=t[e];n(o)&&(o.vm.$destroy(),o.vm=null)}}function u(t,e){t!==e&&(e.vm=t.vm,function(t){for(var e=Object.keys(t.args),s=0;s<e.length;s++)e.forEach(function(e){t.vm[e]=t.args[e]})}(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.patchChildren=function(t,e){n(t)&&n(e)?t!==e&&function(t,e){var s,d,v,m=0,h=0,p=t.length-1,f=t[0],_=t[p],g=e.length-1,x=e[0],w=e[g];for(;m<=p&&h<=g;)o(f)?f=t[++m]:o(_)?_=t[--p]:a(f,x)?(u(f,x),f=t[++m],x=e[++h]):a(_,w)?(u(_,w),_=t[--p],w=e[--g]):a(f,w)?(u(f,w),f=t[++m],w=e[--g]):a(_,x)?(u(_,x),_=t[--p],x=e[++h]):(o(s)&&(s=r(t,m,p)),o(d=n(x.key)?s[x.key]:null)?(i(x),x=e[++h]):a(v=t[d],x)?(u(v,x),t[d]=void 0,x=e[++h]):(i(x),x=e[++h]));m>p?l(e,h,g):h>g&&c(t,m,p)}(t,e):n(e)?l(e,0,e.length-1):n(t)&&c(t,0,t.length-1)},e.h=function(t,e,s){return{tag:t,key:e,args:s}}},fkiB:function(t,e,s){"use strict";function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.pushParams=r,e.popParams=l,e.withParams=function(t,e){if("object"===n(t)&&void 0!==e)return s=t,o=e,u(function(t){return function(){t(s);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o.apply(this,n)}});var s,o;return u(t)},e._setTarget=e.target=void 0;var a=[],i=null;e.target=i;function r(){null!==i&&a.push(i),e.target=i={}}function l(){var t=i,s=e.target=i=a.pop()||null;return s&&(Array.isArray(s.$sub)||(s.$sub=[]),s.$sub.push(t)),t}function c(t){if("object"!==n(t)||Array.isArray(t))throw new Error("params must be an object");e.target=i=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach(function(e){o(t,e,s[e])})}return t}({},i,t)}function u(t){var e=t(c);return function(){r();try{for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e.apply(this,s)}finally{l()}}}e._setTarget=function(t){e.target=i=t}},jNRQ:function(t,e){},mbHj:function(t,e){},ne0W:function(t,e,s){t.exports=s.p+"static/img/no_image.e614324.png"},pUsm:function(t,e){},rvZS:function(t,e){},ykl7:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.87829fba819cf951b517.js.map